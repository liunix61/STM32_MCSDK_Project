<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STM32 Motor Control SDK: Flux-weakening control</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
  tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true
    }
});
</script>
<script type="text/javascript" async="async" src="./mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="styleSheetFile.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="motor_control.png"/></td>
  <td id="projectalign">
   <div id="projectname">STM32 Motor Control SDK<span id="projectnumber">&#160;MCFW-6.1.0</span>
   </div>
   <div id="projectbrief">Software Development Kit to build applications driving PMSM Motors with STM32</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Flux-weakening control </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >The purpose of the flux-weakening functionality is to expand the operating limits of a permanent-magnet motor by reaching speeds higher than rated, as many applications require under operating conditions where the load is lower than rated. Here, the rated speed is considered to be the highest speed at which the motor can still deliver maximum torque.</p>
<p >The magnetic flux can be weakened by acting on direct axis current \(i_d\); given a motor rated current In, such as \(I_n=\sqrt{i_q^2+i_d^2}\), if we choose to set \(i_d ≠ 0\), then the maximum available quadrature current \(i_q\) is reduced. Consequently, in case of an SM-PMSM, as shown in <a class="el" href="md_docs_pmsm_fundamental_equations.html">SM-PMSM field-oriented control (FOC)</a>, the maximum deliverable electromagnetic torque is also reduced. On the other hand, for an IPM motor, acting separately on id causes a deviation from the MTPA path (as explained in <a class="el" href="md_docs_pmsm_maximum_torque_per_ampere_control.html">PMSM maximum torque per ampere (MTPA) control</a>).</p>
<p >“Closed-loop” flux weakening has been implemented. Accurate knowledge of machine parameters is not required, which strongly reduces sensitivity to parameter deviation. This scheme is suitable for both IPMSMs and SM-PMSMs.</p>
<p >The control loop is based on stator voltage monitoring (figure below shows the diagram).</p>
<p >The current regulator output \(V_s\) is checked against a settled threshold (“voltage level*” parameter). If Vs is beyond that limit, the flux-weakening region is entered automatically by regulating a control signal, \(i_{fw}^*\), that is summed up to \(i_{ds}^*\), the output of the MTPA controller. This is done by means of a PI regulator (whose gain can be tuned in real-time) in order to prevent the saturation of the current regulators. It clearly appears, then, that the higher the voltage level* parameter is settled (by keeping up current regulation), the higher the achieved efficiency and maximum speed.</p>
<p >If \(V_s\) is smaller than the settled threshold, then \(i_{fw}\) decreases to zero and the MTPA block resumes control.</p>
<p >The current \(i_{ds}^{**}\) output from the flux-weakening controller must be checked against \(i_{ds}\) max to avoid the demagnetization of the motor.</p>
<div class="image">
<img src="flux_weakening_scheme.png" alt=""/>
<div class="caption">
Flux-weakening operation scheme</div></div>
    <p >This feature can be activated with the MC Workbench GUI.</p>
<p ><a class="el" href="md_docs__p_i_d_regulator_theoretical_background.html">Next: PID regulator theoretical background</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.5-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
&copy; 2022, ST Microelectronics &#160;<a href="http://st.com">
<img class="footer" src="ST_logo_footer.png" alt="ST Microelectronics"/>
</a>
</small></address>
</body>
</html>
