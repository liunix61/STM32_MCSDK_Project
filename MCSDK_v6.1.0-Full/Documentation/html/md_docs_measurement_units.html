<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STM32 Motor Control SDK: Measurement Units used by the firmware</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
  tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true
    }
});
</script>
<script type="text/javascript" async="async" src="./mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="styleSheetFile.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="motor_control.png"/></td>
  <td id="projectalign">
   <div id="projectname">STM32 Motor Control SDK<span id="projectnumber">&#160;MCFW-6.1.0</span>
   </div>
   <div id="projectbrief">Software Development Kit to build applications driving PMSM Motors with STM32</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Measurement Units used by the firmware </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >Many functions in the MC firmware take physical values as arguments. Some of these arguments are expressed with unusual measurement units in order to maximize the usage of the dynamic provided by the argument types. It is key to achieve an optimal MC precision. The following sections describe these units.</p>
<h1>Rotor angle unit s16degree</h1>
<p >The rotor angle measurement unit used in the MC API is called <b>s16degree</b>, and is defined as follows: $$ 1 \phantom{x}\mathrm{s16degree} = \frac{2\pi}{65536} \phantom{x}\mathrm{rad} $$</p>
<p >The following figure shows how an angle expressed in radians can be converted into the <b>s16degree</b> unit domain.</p>
<div class="image">
<object type="image/svg+xml" data="s16degree_units.svg" style="pointer-events: none;"></object>
</div>
    <h1>Rotor speed unit SPEED_UNIT and dpp</h1>
<p >Two units are used by the MC APIs to express the rotor speed:</p>
<ul>
<li><b>SPEED_UNIT</b> is a Tenth of Hertz unit, often referred to as “ <b>U_01HZ</b> ” in the code with:</li>
</ul>
<p >$$ 1 \phantom{x}\mathrm{dHz} = 1 \phantom{x}\mathrm{\texttt{U_01HZ}} = 0.1 \phantom{x}\mathrm{Hz} $$</p>
<ul>
<li>Digit Per control Period, referred to as <b>dpp</b>: the <b>dpp</b> expresses the angular speed as the variation of the electrical angle (expressed in <b>s16degree</b>) within an FOC period.</li>
</ul>
<p >$$ 1\ \mathrm{dpp}=\frac{1\ }{T_{FOC}}\ \mathrm{s16degree/s\ =\ }\frac{2\pi}{65536\cdot\ T_{FOC}}\ \mathrm{rad/s\ =\ }\frac{2\pi}{65536\ }{\cdot F}_{FOC}\mathrm{\ rad/s} $$</p>
<p >Where \(T_{FOC}\) is the FOC period in seconds and \(F_{FOC}\) the FOC frequency in Hz.</p>
<p >An angular speed, expressed as the frequency in Tenth of Hertz (U_01HZ), can be easily converted to dpp using the formula:</p>
<p >$$ \omega_{dpp}=\omega_{\texttt{U_01HZ}}\cdot\frac{65536}{10\cdot F_{FOC}} $$</p>
<h1>Current measurement unit s16A</h1>
<p >The phase current measurement unit used by the MC APIs is called <b>s16A</b> and is defined as follows:</p>
<p >$$ 1\ \mathrm{s16A}=\ \frac{I_{MAX}}{32767} $$</p>
<p >Where \(I_{MAX}\) is the Maximum measureable current. In a shunt resistor-based current sensing architecture for instance,</p>
<p >$$ I_{MAX}=\frac{V_{DD}}{2\cdot R_{Shunt}\cdot G_{AOP}} $$</p>
<p >Where \(V_{DD}\) is the reference voltage used for the ADC, \(R_{Sunt}\) the shunt resistor and \(G_{AOP}\) the gain of the amplification stage in front of the ADC (see Figure below). A measured current can then be converted to s16A using the formula:</p>
<p >$$ i_{s16A}=\frac{65536\cdot R_{Shunt}\cdot G_{AOP}}{V_{DD}}{\cdot i}_A $$</p>
<div class="image">
<object type="image/svg+xml" data="current_sensing_network.svg" style="pointer-events: none;"></object>
<div class="caption">
Current sensing network</div></div>
    <h1>Voltage measurement unit s16V</h1>
<p >The applied phase voltage unit used by the Motor Control APIs is called <b>s16V</b> and is defined as follows:</p>
<p >$$ 1\ \mathrm{s16V}=\ \frac{V_{MAX}}{32767} $$</p>
<p >Where \(V_{MAX}\) is the Maximum applicable phase voltage. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.5-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
&copy; 2022, ST Microelectronics &#160;<a href="http://st.com">
<img class="footer" src="ST_logo_footer.png" alt="ST Microelectronics"/>
</a>
</small></address>
</body>
</html>
