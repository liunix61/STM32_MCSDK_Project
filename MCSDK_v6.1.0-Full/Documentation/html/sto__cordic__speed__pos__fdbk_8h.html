<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STM32 Motor Control SDK: MCSDK/MCLib/Any/Inc/sto_cordic_speed_pos_fdbk.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
  tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true
    }
});
</script>
<script type="text/javascript" async="async" src="./mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="styleSheetFile.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="motor_control.png"/></td>
  <td id="projectalign">
   <div id="projectname">STM32 Motor Control SDK<span id="projectnumber">&#160;MCFW-6.1.0</span>
   </div>
   <div id="projectbrief">Software Development Kit to build applications driving PMSM Motors with STM32</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_5ebbea1114bd7627641b9c8b89cd5b2b.html">MCSDK</a></li><li class="navelem"><a class="el" href="dir_79d4adb0498bf053227c39dbd6578f5f.html">MCLib</a></li><li class="navelem"><a class="el" href="dir_80bc119df44e2dd44e2c73626e7f1f08.html">Any</a></li><li class="navelem"><a class="el" href="dir_9fea3fb0dfcc6f370077182e8a006c5b.html">Inc</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">sto_cordic_speed_pos_fdbk.h File Reference<div class="ingroups"><a class="el" href="group___m_c_s_d_k.html">MCSDK</a> &raquo; <a class="el" href="group___speedn_pos_fdbk.html">Speed &amp; Position Feedback</a> &raquo; <a class="el" href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html">State Observer CORDIC Speed &amp; Position Feedback</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>This file contains all definitions and functions prototypes for the State Observer + CORDIC Speed &amp; Position Feedback component of the Motor Control SDK.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="speed__pos__fdbk_8h.html">speed_pos_fdbk.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sto__speed__pos__fdbk_8h.html">sto_speed_pos_fdbk.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s_t_o___c_r___handle__t.html">STO_CR_Handle_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This structure is used to handle an instance of the STO_CORDIC component.  <a href="struct_s_t_o___c_r___handle__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga743d2aec7b34a5f2a84a5de0ffd40b7f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html#ga743d2aec7b34a5f2a84a5de0ffd40b7f">STO_CR_Init</a> (<a class="el" href="struct_s_t_o___c_r___handle__t.html">STO_CR_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:ga743d2aec7b34a5f2a84a5de0ffd40b7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">It initializes the state observer object.  <a href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html#ga743d2aec7b34a5f2a84a5de0ffd40b7f">More...</a><br /></td></tr>
<tr class="separator:ga743d2aec7b34a5f2a84a5de0ffd40b7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9354684fa1ad3dc9abf11d402588c5a0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html#ga9354684fa1ad3dc9abf11d402588c5a0">STO_CR_Clear</a> (<a class="el" href="struct_s_t_o___c_r___handle__t.html">STO_CR_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:ga9354684fa1ad3dc9abf11d402588c5a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">It clears state observer object by re-initializing private variables.  <a href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html#ga9354684fa1ad3dc9abf11d402588c5a0">More...</a><br /></td></tr>
<tr class="separator:ga9354684fa1ad3dc9abf11d402588c5a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab6df4cf4bfdeee2235e4064aacee2b64"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html#gab6df4cf4bfdeee2235e4064aacee2b64">STO_CR_CalcElAngle</a> (<a class="el" href="struct_s_t_o___c_r___handle__t.html">STO_CR_Handle_t</a> *pHandle, <a class="el" href="struct_observer___inputs__t.html">Observer_Inputs_t</a> *pInputs)</td></tr>
<tr class="memdesc:gab6df4cf4bfdeee2235e4064aacee2b64"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method executes Luenberger state observer equations and calls CORDIC with the purpose of computing a new speed estimation and updating the estimated electrical angle.  <a href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html#gab6df4cf4bfdeee2235e4064aacee2b64">More...</a><br /></td></tr>
<tr class="separator:gab6df4cf4bfdeee2235e4064aacee2b64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga61ea59fb81d893742906d7203d642e34"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html#ga61ea59fb81d893742906d7203d642e34">STO_CR_CalcAvrgMecSpeedUnit</a> (<a class="el" href="struct_s_t_o___c_r___handle__t.html">STO_CR_Handle_t</a> *pHandle, int16_t *pMecSpeedUnit)</td></tr>
<tr class="memdesc:ga61ea59fb81d893742906d7203d642e34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes the rotor average mechanical speed in the unit defined by <a class="el" href="mc__stm__types_8h.html#a068140274b96a55eabb3ed3261c30d75" title="Rotation speed unit used at the interface with the application.">SPEED_UNIT</a> and writes it in pMecSpeedUnit.  <a href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html#ga61ea59fb81d893742906d7203d642e34">More...</a><br /></td></tr>
<tr class="separator:ga61ea59fb81d893742906d7203d642e34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa9290ab193434b00d07f6272f078b2d6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html#gaa9290ab193434b00d07f6272f078b2d6">STO_CR_IsObserverConverged</a> (<a class="el" href="struct_s_t_o___c_r___handle__t.html">STO_CR_Handle_t</a> *pHandle, int16_t hForcedMecSpeedUnit)</td></tr>
<tr class="memdesc:gaa9290ab193434b00d07f6272f078b2d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the Observer has converged or false otherwise.  <a href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html#gaa9290ab193434b00d07f6272f078b2d6">More...</a><br /></td></tr>
<tr class="separator:gaa9290ab193434b00d07f6272f078b2d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaef5f8b7d311e81f27248fb21ac9b7972"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structalphabeta__t.html">alphabeta_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html#gaef5f8b7d311e81f27248fb21ac9b7972">STO_CR_GetEstimatedBemf</a> (<a class="el" href="struct_s_t_o___c_r___handle__t.html">STO_CR_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gaef5f8b7d311e81f27248fb21ac9b7972"><td class="mdescLeft">&#160;</td><td class="mdescRight">It exports estimated Bemf alpha-beta in <a class="el" href="structqd__t.html" title="Two components q, d type definition.">qd_t</a> format.  <a href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html#gaef5f8b7d311e81f27248fb21ac9b7972">More...</a><br /></td></tr>
<tr class="separator:gaef5f8b7d311e81f27248fb21ac9b7972"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4cdeceaf9fd7a36501ad2db4e29ae37c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structalphabeta__t.html">alphabeta_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html#ga4cdeceaf9fd7a36501ad2db4e29ae37c">STO_CR_GetEstimatedCurrent</a> (<a class="el" href="struct_s_t_o___c_r___handle__t.html">STO_CR_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:ga4cdeceaf9fd7a36501ad2db4e29ae37c"><td class="mdescLeft">&#160;</td><td class="mdescRight">It exports the stator current alpha-beta as estimated by state observer.  <a href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html#ga4cdeceaf9fd7a36501ad2db4e29ae37c">More...</a><br /></td></tr>
<tr class="separator:ga4cdeceaf9fd7a36501ad2db4e29ae37c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae4a4e43ac76880a09e4d07999b895c2a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html#gae4a4e43ac76880a09e4d07999b895c2a">STO_CR_GetObserverGains</a> (<a class="el" href="struct_s_t_o___c_r___handle__t.html">STO_CR_Handle_t</a> *pHandle, int16_t *phC2, int16_t *phC4)</td></tr>
<tr class="memdesc:gae4a4e43ac76880a09e4d07999b895c2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">It exports current observer gains through parameters hhC2 and hhC4.  <a href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html#gae4a4e43ac76880a09e4d07999b895c2a">More...</a><br /></td></tr>
<tr class="separator:gae4a4e43ac76880a09e4d07999b895c2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2f0f9956789a29e2f6f234e8bc26e41c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html#ga2f0f9956789a29e2f6f234e8bc26e41c">STO_CR_SetObserverGains</a> (<a class="el" href="struct_s_t_o___c_r___handle__t.html">STO_CR_Handle_t</a> *pHandle, int16_t hhC1, int16_t hhC2)</td></tr>
<tr class="memdesc:ga2f0f9956789a29e2f6f234e8bc26e41c"><td class="mdescLeft">&#160;</td><td class="mdescRight">It allows setting new values for observer gains.  <a href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html#ga2f0f9956789a29e2f6f234e8bc26e41c">More...</a><br /></td></tr>
<tr class="separator:ga2f0f9956789a29e2f6f234e8bc26e41c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga82534e1917822a2aa6e5d6f3fc78bf2a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html#ga82534e1917822a2aa6e5d6f3fc78bf2a">STO_CR_CalcAvrgElSpeedDpp</a> (<a class="el" href="struct_s_t_o___c_r___handle__t.html">STO_CR_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:ga82534e1917822a2aa6e5d6f3fc78bf2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method must be called - at least - with the same periodicity on which speed control is executed. It computes and update object variable hElSpeedDpp that is estimated average electrical speed expressed in dpp used for instance in observer equations. Average is computed considering a FIFO depth equal to bSpeedBufferSizedpp.  <a href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html#ga82534e1917822a2aa6e5d6f3fc78bf2a">More...</a><br /></td></tr>
<tr class="separator:ga82534e1917822a2aa6e5d6f3fc78bf2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae5d0b83959c3d64c9faa0b811eb6fea3"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html#gae5d0b83959c3d64c9faa0b811eb6fea3">STO_CR_GetEstimatedBemfLevel</a> (const <a class="el" href="struct_s_t_o___c_r___handle__t.html">STO_CR_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gae5d0b83959c3d64c9faa0b811eb6fea3"><td class="mdescLeft">&#160;</td><td class="mdescRight">It exports estimated Bemf squared level.  <a href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html#gae5d0b83959c3d64c9faa0b811eb6fea3">More...</a><br /></td></tr>
<tr class="separator:gae5d0b83959c3d64c9faa0b811eb6fea3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae618f76c6b84245c677bcf97cc8b2a18"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html#gae618f76c6b84245c677bcf97cc8b2a18">STO_CR_GetObservedBemfLevel</a> (const <a class="el" href="struct_s_t_o___c_r___handle__t.html">STO_CR_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gae618f76c6b84245c677bcf97cc8b2a18"><td class="mdescLeft">&#160;</td><td class="mdescRight">It exports observed Bemf squared level.  <a href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html#gae618f76c6b84245c677bcf97cc8b2a18">More...</a><br /></td></tr>
<tr class="separator:gae618f76c6b84245c677bcf97cc8b2a18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga27f94f610b0d935119ea2a7dc595a6ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html#ga27f94f610b0d935119ea2a7dc595a6ef">STO_CR_BemfConsistencyCheckSwitch</a> (<a class="el" href="struct_s_t_o___c_r___handle__t.html">STO_CR_Handle_t</a> *pHandle, bool bSel)</td></tr>
<tr class="memdesc:ga27f94f610b0d935119ea2a7dc595a6ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">It enables/disables the bemf consistency check.  <a href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html#ga27f94f610b0d935119ea2a7dc595a6ef">More...</a><br /></td></tr>
<tr class="separator:ga27f94f610b0d935119ea2a7dc595a6ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabcdaf3ef9603593858ed8f96e0213e3c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html#gabcdaf3ef9603593858ed8f96e0213e3c">STO_CR_IsBemfConsistent</a> (const <a class="el" href="struct_s_t_o___c_r___handle__t.html">STO_CR_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gabcdaf3ef9603593858ed8f96e0213e3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">It returns the result of the Bemf consistency check.  <a href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html#gabcdaf3ef9603593858ed8f96e0213e3c">More...</a><br /></td></tr>
<tr class="separator:gabcdaf3ef9603593858ed8f96e0213e3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa1f1b1198e93c8cf05be29c860d704a8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html#gaa1f1b1198e93c8cf05be29c860d704a8">STO_CR_IsSpeedReliable</a> (const <a class="el" href="group___speedn_pos_fdbk.html#ga161a0878195349c8bcc94993b6dc1e51">STO_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gaa1f1b1198e93c8cf05be29c860d704a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method returns the reliability of the speed sensor.  <a href="group___s_t_o___c_o_r_d_i_c___speedn_pos_fdbk.html#gaa1f1b1198e93c8cf05be29c860d704a8">More...</a><br /></td></tr>
<tr class="separator:gaa1f1b1198e93c8cf05be29c860d704a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >This file contains all definitions and functions prototypes for the State Observer + CORDIC Speed &amp; Position Feedback component of the Motor Control SDK. </p>
<dl class="section author"><dt>Author</dt><dd>Motor Control SDK Team, ST Microelectronics </dd></dl>
<dl class="section attention"><dt>Attention</dt><dd></dd></dl>
<h2><center>&copy; Copyright (c) 2022 STMicroelectronics. All rights reserved.</center></h2>
<p >This software component is licensed by ST under Ultimate Liberty license SLA0044, the "License"; You may not use this file except in compliance with the License. You may obtain a copy of the License at: www.st.com/SLA0044 </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.9.5-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
&copy; 2022, ST Microelectronics &#160;<a href="http://st.com">
<img class="footer" src="ST_logo_footer.png" alt="ST Microelectronics"/>
</a>
</small></address>
</body>
</html>
