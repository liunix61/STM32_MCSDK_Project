<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STM32 Motor Control SDK: Position Control</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
  tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true
    }
});
</script>
<script type="text/javascript" async="async" src="./mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="styleSheetFile.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="motor_control.png"/></td>
  <td id="projectalign">
   <div id="projectname">STM32 Motor Control SDK<span id="projectnumber">&#160;MCFW-6.1.0</span>
   </div>
   <div id="projectbrief">Software Development Kit to build applications driving PMSM Motors with STM32</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Position Control<div class="ingroups"><a class="el" href="group___m_c_s_d_k.html">MCSDK</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Position Control component of the Motor Control SDK.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:trajectory__ctrl_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trajectory__ctrl_8h.html">trajectory_ctrl.h</a></td></tr>
<tr class="memdesc:trajectory__ctrl_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">This file provides all definitions and functions prototypes for the the Position Control component of the Motor Control SDK. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:trajectory__ctrl_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trajectory__ctrl_8c.html">trajectory_ctrl.c</a></td></tr>
<tr class="memdesc:trajectory__ctrl_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This file provides firmware functions that implements the Position Control component of the Motor Control SDK. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle of a Position Control component.  <a href="struct_pos_ctrl___handle__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gab161a4fd229a4c6a31ca0072fa491c4d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___position_control.html#gab161a4fd229a4c6a31ca0072fa491c4d">TC_Init</a> (<a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a> *pHandle, <a class="el" href="struct_p_i_d___handle__t.html">PID_Handle_t</a> *pPIDPosReg, <a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *pSTC, <a class="el" href="struct_e_n_c_o_d_e_r___handle__t.html">ENCODER_Handle_t</a> *pENC)</td></tr>
<tr class="memdesc:gab161a4fd229a4c6a31ca0072fa491c4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the handle of position control.  <a href="group___position_control.html#gab161a4fd229a4c6a31ca0072fa491c4d">More...</a><br /></td></tr>
<tr class="separator:gab161a4fd229a4c6a31ca0072fa491c4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3faadb851a7265a76e69d13c176ca4e8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___position_control.html#ga3faadb851a7265a76e69d13c176ca4e8">TC_MoveCommand</a> (<a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a> *pHandle, float startingAngle, float angleStep, float movementDuration)</td></tr>
<tr class="memdesc:ga3faadb851a7265a76e69d13c176ca4e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures the trapezoidal speed trajectory.  <a href="group___position_control.html#ga3faadb851a7265a76e69d13c176ca4e8">More...</a><br /></td></tr>
<tr class="separator:ga3faadb851a7265a76e69d13c176ca4e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7c8a3f82406e2256bd8e96cd8ee62658"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___position_control.html#ga7c8a3f82406e2256bd8e96cd8ee62658">TC_FollowCommand</a> (<a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a> *pHandle, float Angle)</td></tr>
<tr class="memdesc:ga7c8a3f82406e2256bd8e96cd8ee62658"><td class="mdescLeft">&#160;</td><td class="mdescRight">Follows an angular position command.  <a href="group___position_control.html#ga7c8a3f82406e2256bd8e96cd8ee62658">More...</a><br /></td></tr>
<tr class="separator:ga7c8a3f82406e2256bd8e96cd8ee62658"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae14cdcae46d81e5bb43eae24898ed383"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___position_control.html#gae14cdcae46d81e5bb43eae24898ed383">TC_PositionRegulation</a> (<a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gae14cdcae46d81e5bb43eae24898ed383"><td class="mdescLeft">&#160;</td><td class="mdescRight">Proceeds on the position control loop.  <a href="group___position_control.html#gae14cdcae46d81e5bb43eae24898ed383">More...</a><br /></td></tr>
<tr class="separator:gae14cdcae46d81e5bb43eae24898ed383"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf2531275f0c03a0bd52d9872cbfd0f47"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___position_control.html#gaf2531275f0c03a0bd52d9872cbfd0f47">TC_MoveExecution</a> (<a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gaf2531275f0c03a0bd52d9872cbfd0f47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes the programmed trajectory movement.  <a href="group___position_control.html#gaf2531275f0c03a0bd52d9872cbfd0f47">More...</a><br /></td></tr>
<tr class="separator:gaf2531275f0c03a0bd52d9872cbfd0f47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2c88d2d7fbd465042ad3a7050e806a89"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___position_control.html#ga2c88d2d7fbd465042ad3a7050e806a89">TC_FollowExecution</a> (<a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:ga2c88d2d7fbd465042ad3a7050e806a89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the angular position.  <a href="group___position_control.html#ga2c88d2d7fbd465042ad3a7050e806a89">More...</a><br /></td></tr>
<tr class="separator:ga2c88d2d7fbd465042ad3a7050e806a89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae77c534b50fec446abb586e48838c1bf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___position_control.html#gae77c534b50fec446abb586e48838c1bf">TC_EncAlignmentCommand</a> (<a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gae77c534b50fec446abb586e48838c1bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the alignment phase at starting before any position commands.  <a href="group___position_control.html#gae77c534b50fec446abb586e48838c1bf">More...</a><br /></td></tr>
<tr class="separator:gae77c534b50fec446abb586e48838c1bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad072fcc3dc28459b030dd1e17bdcaf02"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___position_control.html#gad072fcc3dc28459b030dd1e17bdcaf02">TC_RampCompleted</a> (<a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gad072fcc3dc28459b030dd1e17bdcaf02"><td class="mdescLeft">&#160;</td><td class="mdescRight">It controls if time allowed for movement is completed.  <a href="group___position_control.html#gad072fcc3dc28459b030dd1e17bdcaf02">More...</a><br /></td></tr>
<tr class="separator:gad072fcc3dc28459b030dd1e17bdcaf02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaad41ea962a61025382b15c3eadc73ead"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___position_control.html#gaad41ea962a61025382b15c3eadc73ead">TC_EncoderReset</a> (<a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gaad41ea962a61025382b15c3eadc73ead"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the absolute zero mechanical position.  <a href="group___position_control.html#gaad41ea962a61025382b15c3eadc73ead">More...</a><br /></td></tr>
<tr class="separator:gaad41ea962a61025382b15c3eadc73ead"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae3e86be4f160122943f131e632f6ca8d"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___position_control.html#gae3e86be4f160122943f131e632f6ca8d">TC_GetCurrentPosition</a> (<a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gae3e86be4f160122943f131e632f6ca8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current rotor mechanical angle, expressed in radiant.  <a href="group___position_control.html#gae3e86be4f160122943f131e632f6ca8d">More...</a><br /></td></tr>
<tr class="separator:gae3e86be4f160122943f131e632f6ca8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae1aa5ee7b1bedf401548d5a9ddd565e4"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___position_control.html#gae1aa5ee7b1bedf401548d5a9ddd565e4">TC_GetTargetPosition</a> (<a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gae1aa5ee7b1bedf401548d5a9ddd565e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the target rotor mechanical angle, expressed in radiant.  <a href="group___position_control.html#gae1aa5ee7b1bedf401548d5a9ddd565e4">More...</a><br /></td></tr>
<tr class="separator:gae1aa5ee7b1bedf401548d5a9ddd565e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga10e5a7dae58a389ef92f90c334ccd695"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___position_control.html#ga10e5a7dae58a389ef92f90c334ccd695">TC_GetMoveDuration</a> (<a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:ga10e5a7dae58a389ef92f90c334ccd695"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the duration used to execute the movement, expressed in seconds.  <a href="group___position_control.html#ga10e5a7dae58a389ef92f90c334ccd695">More...</a><br /></td></tr>
<tr class="separator:ga10e5a7dae58a389ef92f90c334ccd695"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab532341a86ce72a1f0d3fcf4f8b15e86"><td class="memItemLeft" align="right" valign="top">PosCtrlStatus_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___position_control.html#gab532341a86ce72a1f0d3fcf4f8b15e86">TC_GetControlPositionStatus</a> (<a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gab532341a86ce72a1f0d3fcf4f8b15e86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the status of the position control execution.  <a href="group___position_control.html#gab532341a86ce72a1f0d3fcf4f8b15e86">More...</a><br /></td></tr>
<tr class="separator:gab532341a86ce72a1f0d3fcf4f8b15e86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae841f9a24c849676d67073419d27d84d"><td class="memItemLeft" align="right" valign="top">AlignStatus_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___position_control.html#gae841f9a24c849676d67073419d27d84d">TC_GetAlignmentStatus</a> (<a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gae841f9a24c849676d67073419d27d84d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the status after the rotor alignment phase.  <a href="group___position_control.html#gae841f9a24c849676d67073419d27d84d">More...</a><br /></td></tr>
<tr class="separator:gae841f9a24c849676d67073419d27d84d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab98f05e6cbc332cb6a247ce3645feec4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___position_control.html#gab98f05e6cbc332cb6a247ce3645feec4">TC_IncTick</a> (<a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gab98f05e6cbc332cb6a247ce3645feec4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increments Tick counter used in follow mode.  <a href="group___position_control.html#gab98f05e6cbc332cb6a247ce3645feec4">More...</a><br /></td></tr>
<tr class="separator:gab98f05e6cbc332cb6a247ce3645feec4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >Position Control component of the Motor Control SDK. </p>
<p >The Position Control component allows to control the movement of the motor in two different ways:</p>
<ul>
<li>Trajectory control mode, implemented by the <a class="el" href="group___position_control.html#ga3faadb851a7265a76e69d13c176ca4e8" title="Configures the trapezoidal speed trajectory.">TC_MoveCommand()</a> function: allows to move the motor to a specified target mechanical position in a settled time (duration) following a programmed trajectory composed of three phases: 1- acceleration, 2- rotation at constant speed and 3- deceleration.</li>
<li>Follow mode, implemented by the <a class="el" href="group___position_control.html#ga7c8a3f82406e2256bd8e96cd8ee62658" title="Follows an angular position command.">TC_FollowCommand()</a> function: This mode is for instance useful when the trajectory is computed by an external controller, or by an algorithm defined by the user. The user can send at fixed rate, different target positions according to a required trajectory and the position control algorithm computes the intermediate points to reach (follow) the target with a smooth movement.</li>
</ul>
<p >The position controller uses a PID (with a proportional, integral and derivative action) to regulate the angular position. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gae77c534b50fec446abb586e48838c1bf" name="gae77c534b50fec446abb586e48838c1bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae77c534b50fec446abb586e48838c1bf">&#9670;&#160;</a></span>TC_EncAlignmentCommand()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TC_EncAlignmentCommand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles the alignment phase at starting before any position commands. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the Position Control component. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaad41ea962a61025382b15c3eadc73ead" name="gaad41ea962a61025382b15c3eadc73ead"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaad41ea962a61025382b15c3eadc73ead">&#9670;&#160;</a></span>TC_EncoderReset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TC_EncoderReset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the absolute zero mechanical position. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the Position Control component. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga7c8a3f82406e2256bd8e96cd8ee62658" name="ga7c8a3f82406e2256bd8e96cd8ee62658"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7c8a3f82406e2256bd8e96cd8ee62658">&#9670;&#160;</a></span>TC_FollowCommand()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TC_FollowCommand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>Angle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Follows an angular position command. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the Position Control component. </td></tr>
    <tr><td class="paramname">Angle</td><td>Target mechanical position.</td></tr>
  </table>
  </dd>
</dl>
<p>This function implements the Follow mode. When the duration is set to zero, the user can send at fixed rate different target positions according to a required trajectory and the position control algorithm computes the intermediate points to reach (follow) the target with a smooth movement. This mode is for instance useful when the trajectory is computed by an external controller, or by an algorithm defined by the user and executed by the same microcontroller. </p>

</div>
</div>
<a id="ga2c88d2d7fbd465042ad3a7050e806a89" name="ga2c88d2d7fbd465042ad3a7050e806a89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2c88d2d7fbd465042ad3a7050e806a89">&#9670;&#160;</a></span>TC_FollowExecution()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TC_FollowExecution </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the angular position. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the Position Control component. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gae841f9a24c849676d67073419d27d84d" name="gae841f9a24c849676d67073419d27d84d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae841f9a24c849676d67073419d27d84d">&#9670;&#160;</a></span>TC_GetAlignmentStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AlignStatus_t TC_GetAlignmentStatus </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the status after the rotor alignment phase. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the Position Control component. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gab532341a86ce72a1f0d3fcf4f8b15e86" name="gab532341a86ce72a1f0d3fcf4f8b15e86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab532341a86ce72a1f0d3fcf4f8b15e86">&#9670;&#160;</a></span>TC_GetControlPositionStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PosCtrlStatus_t TC_GetControlPositionStatus </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the status of the position control execution. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the Position Control component. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Position</td><td>Control Status </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gae3e86be4f160122943f131e632f6ca8d" name="gae3e86be4f160122943f131e632f6ca8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae3e86be4f160122943f131e632f6ca8d">&#9670;&#160;</a></span>TC_GetCurrentPosition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float TC_GetCurrentPosition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current rotor mechanical angle, expressed in radiant. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the Position Control component. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">current</td><td>mechanical position </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga10e5a7dae58a389ef92f90c334ccd695" name="ga10e5a7dae58a389ef92f90c334ccd695"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga10e5a7dae58a389ef92f90c334ccd695">&#9670;&#160;</a></span>TC_GetMoveDuration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float TC_GetMoveDuration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the duration used to execute the movement, expressed in seconds. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the Position Control component. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Duration</td><td>of programmed movement </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gae1aa5ee7b1bedf401548d5a9ddd565e4" name="gae1aa5ee7b1bedf401548d5a9ddd565e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae1aa5ee7b1bedf401548d5a9ddd565e4">&#9670;&#160;</a></span>TC_GetTargetPosition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float TC_GetTargetPosition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the target rotor mechanical angle, expressed in radiant. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the Position Control component. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Target</td><td>mechanical position </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gab98f05e6cbc332cb6a247ce3645feec4" name="gab98f05e6cbc332cb6a247ce3645feec4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab98f05e6cbc332cb6a247ce3645feec4">&#9670;&#160;</a></span>TC_IncTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TC_IncTick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Increments Tick counter used in follow mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the Position Control component. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gab161a4fd229a4c6a31ca0072fa491c4d" name="gab161a4fd229a4c6a31ca0072fa491c4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab161a4fd229a4c6a31ca0072fa491c4d">&#9670;&#160;</a></span>TC_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TC_Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_p_i_d___handle__t.html">PID_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pPIDPosReg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pSTC</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_e_n_c_o_d_e_r___handle__t.html">ENCODER_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pENC</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the handle of position control. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the Position Control component. </td></tr>
    <tr><td class="paramname">pPIDPosReg</td><td>pointer on the handler of the current instance of PID used for the position regulation. </td></tr>
    <tr><td class="paramname">pSTC</td><td>pointer on the handler of the current instance of the SpeednTorqCtrl component. </td></tr>
    <tr><td class="paramname">pENC</td><td>handler of the current instance of the EncAlignCtrl component. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga3faadb851a7265a76e69d13c176ca4e8" name="ga3faadb851a7265a76e69d13c176ca4e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3faadb851a7265a76e69d13c176ca4e8">&#9670;&#160;</a></span>TC_MoveCommand()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TC_MoveCommand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>startingAngle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>angleStep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>movementDuration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures the trapezoidal speed trajectory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the Position Control component. </td></tr>
    <tr><td class="paramname">startingAngle</td><td>Current mechanical position. </td></tr>
    <tr><td class="paramname">angleStep</td><td>Target mechanical position. </td></tr>
    <tr><td class="paramname">movementDuration</td><td>Duration to reach the final position (in seconds). </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ConfigurationStatus</td><td>set to true when Trajectory command is programmed otherwise not yet ready for a new trajectory configuration.</td></tr>
  </table>
  </dd>
</dl>
<p>This function implements the Trajectory Control mode. When fDuration is different from 0, the trajectory of the movement, and therefore its acceleration and speed, are computed. </p>

</div>
</div>
<a id="gaf2531275f0c03a0bd52d9872cbfd0f47" name="gaf2531275f0c03a0bd52d9872cbfd0f47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf2531275f0c03a0bd52d9872cbfd0f47">&#9670;&#160;</a></span>TC_MoveExecution()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TC_MoveExecution </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Executes the programmed trajectory movement. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the Position Control component. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gae14cdcae46d81e5bb43eae24898ed383" name="gae14cdcae46d81e5bb43eae24898ed383"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae14cdcae46d81e5bb43eae24898ed383">&#9670;&#160;</a></span>TC_PositionRegulation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TC_PositionRegulation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Proceeds on the position control loop. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the Position Control component. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gad072fcc3dc28459b030dd1e17bdcaf02" name="gad072fcc3dc28459b030dd1e17bdcaf02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad072fcc3dc28459b030dd1e17bdcaf02">&#9670;&#160;</a></span>TC_RampCompleted()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TC_RampCompleted </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_pos_ctrl___handle__t.html">PosCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>It controls if time allowed for movement is completed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the Position Control component. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Status</td><td>return true when the programmed trajectory movement is completed false when the trajectory movement execution is still ongoing. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.9.5-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
&copy; 2022, ST Microelectronics &#160;<a href="http://st.com">
<img class="footer" src="ST_logo_footer.png" alt="ST Microelectronics"/>
</a>
</small></address>
</body>
</html>
