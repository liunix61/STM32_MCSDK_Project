<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STM32 Motor Control SDK: Flux Weakening Control</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
  tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true
    }
});
</script>
<script type="text/javascript" async="async" src="./mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="styleSheetFile.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="motor_control.png"/></td>
  <td id="projectalign">
   <div id="projectname">STM32 Motor Control SDK<span id="projectnumber">&#160;MCFW-6.1.0</span>
   </div>
   <div id="projectbrief">Software Development Kit to build applications driving PMSM Motors with STM32</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Flux Weakening Control<div class="ingroups"><a class="el" href="group___m_c_s_d_k.html">MCSDK</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Flux Weakening (FW) Control component of the Motor Control SDK.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:flux__weakening__ctrl_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flux__weakening__ctrl_8h.html">flux_weakening_ctrl.h</a></td></tr>
<tr class="memdesc:flux__weakening__ctrl_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">This file provides all definitions and functions prototypes for the Flux Weakening Control component of the Motor Control SDK. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:flux__weakening__ctrl_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flux__weakening__ctrl_8c.html">flux_weakening_ctrl.c</a></td></tr>
<tr class="memdesc:flux__weakening__ctrl_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This file provides firmware functions that implements the Flux Weakening Control component of the Motor Control SDK. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_f_w___handle__t.html">FW_Handle_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flux Weakening Control Component handle structure.  <a href="struct_f_w___handle__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga92f1158046097467fa0cde0914001809"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___flux_weakening_ctrl.html#ga92f1158046097467fa0cde0914001809">FW_Init</a> (<a class="el" href="struct_f_w___handle__t.html">FW_Handle_t</a> *pHandle, <a class="el" href="struct_p_i_d___handle__t.html">PID_Handle_t</a> *pPIDSpeed, <a class="el" href="struct_p_i_d___handle__t.html">PID_Handle_t</a> *pPIDFluxWeakeningHandle)</td></tr>
<tr class="memdesc:ga92f1158046097467fa0cde0914001809"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes flux weakening component handler, it should be called once during Motor Control initialization.  <a href="group___flux_weakening_ctrl.html#ga92f1158046097467fa0cde0914001809">More...</a><br /></td></tr>
<tr class="separator:ga92f1158046097467fa0cde0914001809"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaffc6ce2f053a4b54dba26ee4591a1724"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___flux_weakening_ctrl.html#gaffc6ce2f053a4b54dba26ee4591a1724">FW_Clear</a> (<a class="el" href="struct_f_w___handle__t.html">FW_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gaffc6ce2f053a4b54dba26ee4591a1724"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears the Flux weakening internal variables except the target voltage (hFW_V_Ref). It should be called before each motor restart.  <a href="group___flux_weakening_ctrl.html#gaffc6ce2f053a4b54dba26ee4591a1724">More...</a><br /></td></tr>
<tr class="separator:gaffc6ce2f053a4b54dba26ee4591a1724"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3c0195ca3a644ab1c17feabbc6d9a4fe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structqd__t.html">qd_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___flux_weakening_ctrl.html#ga3c0195ca3a644ab1c17feabbc6d9a4fe">FW_CalcCurrRef</a> (<a class="el" href="struct_f_w___handle__t.html">FW_Handle_t</a> *pHandle, <a class="el" href="structqd__t.html">qd_t</a> Iqdref)</td></tr>
<tr class="memdesc:ga3c0195ca3a644ab1c17feabbc6d9a4fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes Iqdref according to the flux weakening algorithm. As soon as the speed increases beyond the nominal one, flux weakening algorithm takes place and handles Idref value. Finally, accordingly with new Idref, a new Iqref saturation value is also computed and put into speed PI. this routine should be called during background task.  <a href="group___flux_weakening_ctrl.html#ga3c0195ca3a644ab1c17feabbc6d9a4fe">More...</a><br /></td></tr>
<tr class="separator:ga3c0195ca3a644ab1c17feabbc6d9a4fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gace230020f18f8b01c9021856d1a030da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___flux_weakening_ctrl.html#gace230020f18f8b01c9021856d1a030da">FW_DataProcess</a> (<a class="el" href="struct_f_w___handle__t.html">FW_Handle_t</a> *pHandle, <a class="el" href="structqd__t.html">qd_t</a> Vqd)</td></tr>
<tr class="memdesc:gace230020f18f8b01c9021856d1a030da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applies a low-pass filter on both Vqd voltage components. Filter bandwidth depends on hVqdLowPassFilterBW parameter. It shall be called during current controller task.  <a href="group___flux_weakening_ctrl.html#gace230020f18f8b01c9021856d1a030da">More...</a><br /></td></tr>
<tr class="separator:gace230020f18f8b01c9021856d1a030da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5c0165ebbe609ff937d90a76869d0118"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___flux_weakening_ctrl.html#ga5c0165ebbe609ff937d90a76869d0118">FW_SetVref</a> (<a class="el" href="struct_f_w___handle__t.html">FW_Handle_t</a> *pHandle, uint16_t hNewVref)</td></tr>
<tr class="memdesc:ga5c0165ebbe609ff937d90a76869d0118"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets a new value for the voltage reference used by flux weakening algorithm.  <a href="group___flux_weakening_ctrl.html#ga5c0165ebbe609ff937d90a76869d0118">More...</a><br /></td></tr>
<tr class="separator:ga5c0165ebbe609ff937d90a76869d0118"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga72eb32fbaff81eb12bc3be6ef2627add"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___flux_weakening_ctrl.html#ga72eb32fbaff81eb12bc3be6ef2627add">FW_GetVref</a> (<a class="el" href="struct_f_w___handle__t.html">FW_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:ga72eb32fbaff81eb12bc3be6ef2627add"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the present value of target voltage used by flux weakening algorihtm.  <a href="group___flux_weakening_ctrl.html#ga72eb32fbaff81eb12bc3be6ef2627add">More...</a><br /></td></tr>
<tr class="separator:ga72eb32fbaff81eb12bc3be6ef2627add"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae236a9f0672df5af83e9c9e1625d8576"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___flux_weakening_ctrl.html#gae236a9f0672df5af83e9c9e1625d8576">FW_GetAvVAmplitude</a> (<a class="el" href="struct_f_w___handle__t.html">FW_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gae236a9f0672df5af83e9c9e1625d8576"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the present value of voltage actually used by flux weakening algorihtm.  <a href="group___flux_weakening_ctrl.html#gae236a9f0672df5af83e9c9e1625d8576">More...</a><br /></td></tr>
<tr class="separator:gae236a9f0672df5af83e9c9e1625d8576"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad30d299de4669108720d9926877bd34e"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___flux_weakening_ctrl.html#gad30d299de4669108720d9926877bd34e">FW_GetAvVPercentage</a> (<a class="el" href="struct_f_w___handle__t.html">FW_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gad30d299de4669108720d9926877bd34e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the present voltage actually used by flux weakening algorihtm as percentage of available voltage.  <a href="group___flux_weakening_ctrl.html#gad30d299de4669108720d9926877bd34e">More...</a><br /></td></tr>
<tr class="separator:gad30d299de4669108720d9926877bd34e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >Flux Weakening (FW) Control component of the Motor Control SDK. </p>
<p >The Flux Weakening Control component modifies Idq reference to reach a speed higher than rated one. To do so it uses its own PID controller to control the current reference and acts also on the PID speed controller. <br  />
</p>
<p >Flux Weakening Control component needs to be initialized before it can be used. This is done with the <a class="el" href="group___flux_weakening_ctrl.html#ga92f1158046097467fa0cde0914001809" title="Initializes flux weakening component handler, it should be called once during Motor Control initializ...">FW_Init()</a> function. Ensure that PID speed has been correctly initialized prior to use flux weakiening component.</p>
<p >The controller functions implemented by the <a class="el" href="group___flux_weakening_ctrl.html#ga3c0195ca3a644ab1c17feabbc6d9a4fe" title="Computes Iqdref according to the flux weakening algorithm. As soon as the speed increases beyond the ...">FW_CalcCurrRef()</a> functions is based on 16-bit integer arithmetics The controller output values returned by this functions is also 16-bit integers. This makes it possible to use this component efficiently on all STM2 MCUs.</p>
<p >For more information, please refer to <a class="el" href="md_docs_flux_weakening_control.html">Flux Weakening documentation</a> </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga3c0195ca3a644ab1c17feabbc6d9a4fe" name="ga3c0195ca3a644ab1c17feabbc6d9a4fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3c0195ca3a644ab1c17feabbc6d9a4fe">&#9670;&#160;</a></span>FW_CalcCurrRef()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak <a class="el" href="structqd__t.html">qd_t</a> FW_CalcCurrRef </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_w___handle__t.html">FW_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structqd__t.html">qd_t</a>&#160;</td>
          <td class="paramname"><em>Iqdref</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes Iqdref according to the flux weakening algorithm. As soon as the speed increases beyond the nominal one, flux weakening algorithm takes place and handles Idref value. Finally, accordingly with new Idref, a new Iqref saturation value is also computed and put into speed PI. this routine should be called during background task. </p>
<p >Computes Iqdref according the flux weakening algorithm. <br  />
</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>pointer to flux weakening component handler. </td></tr>
    <tr><td class="paramname">Iqdref</td><td>current reference that will be modified, if needed, by the flux weakening algorithm. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="structqd__t.html" title="Two components q, d type definition.">qd_t</a></td><td>Computed Iqdref. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaffc6ce2f053a4b54dba26ee4591a1724" name="gaffc6ce2f053a4b54dba26ee4591a1724"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaffc6ce2f053a4b54dba26ee4591a1724">&#9670;&#160;</a></span>FW_Clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void FW_Clear </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_w___handle__t.html">FW_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clears the Flux weakening internal variables except the target voltage (hFW_V_Ref). It should be called before each motor restart. </p>
<p >Clears the flux weakening internal variables</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>pointer to flux weakening component handler. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gace230020f18f8b01c9021856d1a030da" name="gace230020f18f8b01c9021856d1a030da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gace230020f18f8b01c9021856d1a030da">&#9670;&#160;</a></span>FW_DataProcess()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void FW_DataProcess </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_w___handle__t.html">FW_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structqd__t.html">qd_t</a>&#160;</td>
          <td class="paramname"><em>Vqd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Applies a low-pass filter on both Vqd voltage components. Filter bandwidth depends on hVqdLowPassFilterBW parameter. It shall be called during current controller task. </p>
<p >Applies a low-pass filter on both Vqd voltage components.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>pointer to flux weakening component handler. </td></tr>
    <tr><td class="paramname">Vqd</td><td>Voltage componets to be averaged. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gae236a9f0672df5af83e9c9e1625d8576" name="gae236a9f0672df5af83e9c9e1625d8576"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae236a9f0672df5af83e9c9e1625d8576">&#9670;&#160;</a></span>FW_GetAvVAmplitude()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak int16_t FW_GetAvVAmplitude </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_w___handle__t.html">FW_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the present value of voltage actually used by flux weakening algorihtm. </p>
<p >Returns the present value of voltage actually used by flux weakening algorihtm.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>pointer to flux weakening component handler. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int16_t</td><td>Present averaged phase stator voltage value, expressed in s16V (0-to-peak), where PhaseVoltage(V) = [PhaseVoltage(s16A) * Vbus(V)] /[sqrt(3) *32767]. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gad30d299de4669108720d9926877bd34e" name="gad30d299de4669108720d9926877bd34e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad30d299de4669108720d9926877bd34e">&#9670;&#160;</a></span>FW_GetAvVPercentage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak uint16_t FW_GetAvVPercentage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_w___handle__t.html">FW_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the present voltage actually used by flux weakening algorihtm as percentage of available voltage. </p>
<p >Returns the measure of present voltage actually used by flux weakening algorihtm as percentage of available voltage.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>pointer to flux weakening component handler. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">uint16_t</td><td>Present averaged phase stator voltage value, expressed in tenth of percentage points of available voltage. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga72eb32fbaff81eb12bc3be6ef2627add" name="ga72eb32fbaff81eb12bc3be6ef2627add"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga72eb32fbaff81eb12bc3be6ef2627add">&#9670;&#160;</a></span>FW_GetVref()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak uint16_t FW_GetVref </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_w___handle__t.html">FW_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the present value of target voltage used by flux weakening algorihtm. </p>
<p >Returns the present value of target voltage used by flux weakening algorihtm.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>pointer to flux weakening component handler. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int16_t</td><td>Present target voltage value expressed in tenth of percentage points of available voltage. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga92f1158046097467fa0cde0914001809" name="ga92f1158046097467fa0cde0914001809"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga92f1158046097467fa0cde0914001809">&#9670;&#160;</a></span>FW_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void FW_Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_w___handle__t.html">FW_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_p_i_d___handle__t.html">PID_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pPIDSpeed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_p_i_d___handle__t.html">PID_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pPIDFluxWeakeningHandle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes flux weakening component handler, it should be called once during Motor Control initialization. </p>
<p >Initializes flux weakening component handler.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>pointer to flux weakening component handler. </td></tr>
    <tr><td class="paramname">pPIDSpeed</td><td>pointer to speed PID strutcture. </td></tr>
    <tr><td class="paramname">PIDFluxWeakeningHandle</td><td>pointer to FW PID strutcture. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga5c0165ebbe609ff937d90a76869d0118" name="ga5c0165ebbe609ff937d90a76869d0118"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5c0165ebbe609ff937d90a76869d0118">&#9670;&#160;</a></span>FW_SetVref()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void FW_SetVref </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_w___handle__t.html">FW_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>hNewVref</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets a new value for the voltage reference used by flux weakening algorithm. </p>
<p >Sets a new value for the voltage reference used by flux weakening algorithm.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>pointer to flux weakening component handler. </td></tr>
    <tr><td class="paramname">hNewVref</td><td>New target voltage value, expressed in tenth of percentage points of available voltage. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.9.5-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
&copy; 2022, ST Microelectronics &#160;<a href="http://st.com">
<img class="footer" src="ST_logo_footer.png" alt="ST Microelectronics"/>
</a>
</small></address>
</body>
</html>
