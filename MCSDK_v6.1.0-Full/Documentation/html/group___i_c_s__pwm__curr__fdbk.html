<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STM32 Motor Control SDK: ICS 2 ADCs PWM &amp; Current Feedback</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
  tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true
    }
});
</script>
<script type="text/javascript" async="async" src="./mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="styleSheetFile.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="motor_control.png"/></td>
  <td id="projectalign">
   <div id="projectname">STM32 Motor Control SDK<span id="projectnumber">&#160;MCFW-6.1.0</span>
   </div>
   <div id="projectbrief">Software Development Kit to build applications driving PMSM Motors with STM32</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">ICS 2 ADCs PWM &amp; Current Feedback<div class="ingroups"><a class="el" href="group___m_c_s_d_k.html">MCSDK</a> &raquo; <a class="el" href="group__pwm__curr__fdbk.html">PWM &amp; Current Feedback</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>ICS, 2 ADCs, PWM &amp; Current Feedback implementation for F30X, F4XX, F7XX, G4XX and L4XX MCUs.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_i_c_s___params__t.html">ICS_Params_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current feedback component parameters structure definition for ICS configuration. Common to every MCU except F0XX, G0XX and H7XX.  <a href="struct_i_c_s___params__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_p_w_m_c___i_c_s___handle__t.html">PWMC_ICS_Handle_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">PWM and Current Feedback ICS handle. Common to every MCU except F0XX, G0XX and H7XX.  <a href="struct_p_w_m_c___i_c_s___handle__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gad75951e992ab36652c43fec2ae492b08"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_c_s__pwm__curr__fdbk.html#gad75951e992ab36652c43fec2ae492b08">SOFOC</a>&#160;&#160;&#160;0x0008u</td></tr>
<tr class="separator:gad75951e992ab36652c43fec2ae492b08"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gac918b96caa9b352317d710bfb6ee392b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_c_s__pwm__curr__fdbk.html#gac918b96caa9b352317d710bfb6ee392b">ICS_Init</a> (<a class="el" href="struct_p_w_m_c___i_c_s___handle__t.html">PWMC_ICS_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gac918b96caa9b352317d710bfb6ee392b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes TIMx, ADC, GPIO and NVIC for current reading in ICS configuration using STM32F30X.  <a href="group___i_c_s__pwm__curr__fdbk.html#gac918b96caa9b352317d710bfb6ee392b">More...</a><br /></td></tr>
<tr class="separator:gac918b96caa9b352317d710bfb6ee392b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab34b30b8632e23a844a505cfa9f8c1d3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_c_s__pwm__curr__fdbk.html#gab34b30b8632e23a844a505cfa9f8c1d3">ICS_GetPhaseCurrents</a> (<a class="el" href="group__pwm__curr__fdbk.html#ga5febe836591f0388113c624ad3e1a16a">PWMC_Handle_t</a> *pHdl, <a class="el" href="structab__t.html">ab_t</a> *pStator_Currents)</td></tr>
<tr class="memdesc:gab34b30b8632e23a844a505cfa9f8c1d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes and stores in <code>pHdl</code> handler the latest converted motor phase currents in <code>pStator_Currents</code> <a class="el" href="structab__t.html" title="Two components a,b type definition.">ab_t</a> format.  <a href="group___i_c_s__pwm__curr__fdbk.html#gab34b30b8632e23a844a505cfa9f8c1d3">More...</a><br /></td></tr>
<tr class="separator:gab34b30b8632e23a844a505cfa9f8c1d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga233065d45e00f823492adf8e4b465d2f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_c_s__pwm__curr__fdbk.html#ga233065d45e00f823492adf8e4b465d2f">ICS_TurnOnLowSides</a> (<a class="el" href="group__pwm__curr__fdbk.html#ga5febe836591f0388113c624ad3e1a16a">PWMC_Handle_t</a> *pHdl, uint32_t ticks)</td></tr>
<tr class="memdesc:ga233065d45e00f823492adf8e4b465d2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turns on low sides switches.  <a href="group___i_c_s__pwm__curr__fdbk.html#ga233065d45e00f823492adf8e4b465d2f">More...</a><br /></td></tr>
<tr class="separator:ga233065d45e00f823492adf8e4b465d2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6a51c44b5df82019a141f25b71aaa3f7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_c_s__pwm__curr__fdbk.html#ga6a51c44b5df82019a141f25b71aaa3f7">ICS_SwitchOnPWM</a> (<a class="el" href="group__pwm__curr__fdbk.html#ga5febe836591f0388113c624ad3e1a16a">PWMC_Handle_t</a> *pHdl)</td></tr>
<tr class="memdesc:ga6a51c44b5df82019a141f25b71aaa3f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables PWM generation on the proper Timer peripheral acting on MOE bit.  <a href="group___i_c_s__pwm__curr__fdbk.html#ga6a51c44b5df82019a141f25b71aaa3f7">More...</a><br /></td></tr>
<tr class="separator:ga6a51c44b5df82019a141f25b71aaa3f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaac9860153f6b2fb18619be71f81c545d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_c_s__pwm__curr__fdbk.html#gaac9860153f6b2fb18619be71f81c545d">ICS_SwitchOffPWM</a> (<a class="el" href="group__pwm__curr__fdbk.html#ga5febe836591f0388113c624ad3e1a16a">PWMC_Handle_t</a> *pHdl)</td></tr>
<tr class="memdesc:gaac9860153f6b2fb18619be71f81c545d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disables PWM generation on the proper Timer peripheral acting on MOE bit.  <a href="group___i_c_s__pwm__curr__fdbk.html#gaac9860153f6b2fb18619be71f81c545d">More...</a><br /></td></tr>
<tr class="separator:gaac9860153f6b2fb18619be71f81c545d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8bea853a98287d4d857bf4e06296a1a6"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_c_s__pwm__curr__fdbk.html#ga8bea853a98287d4d857bf4e06296a1a6">ICS_WriteTIMRegisters</a> (<a class="el" href="group__pwm__curr__fdbk.html#ga5febe836591f0388113c624ad3e1a16a">PWMC_Handle_t</a> *pHdl)</td></tr>
<tr class="memdesc:ga8bea853a98287d4d857bf4e06296a1a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes into peripheral registers the new duty cycle and sampling point.  <a href="group___i_c_s__pwm__curr__fdbk.html#ga8bea853a98287d4d857bf4e06296a1a6">More...</a><br /></td></tr>
<tr class="separator:ga8bea853a98287d4d857bf4e06296a1a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaac27e792dc9a393534fce45682199404"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_c_s__pwm__curr__fdbk.html#gaac27e792dc9a393534fce45682199404">ICS_TIMx_UP_IRQHandler</a> (<a class="el" href="struct_p_w_m_c___i_c_s___handle__t.html">PWMC_ICS_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gaac27e792dc9a393534fce45682199404"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains the TIMx Update event interrupt.  <a href="group___i_c_s__pwm__curr__fdbk.html#gaac27e792dc9a393534fce45682199404">More...</a><br /></td></tr>
<tr class="separator:gaac27e792dc9a393534fce45682199404"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7e99fce0dfd737b3f9b15aba2f4ca695"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_c_s__pwm__curr__fdbk.html#ga7e99fce0dfd737b3f9b15aba2f4ca695">ICS_BRK2_IRQHandler</a> (<a class="el" href="struct_p_w_m_c___i_c_s___handle__t.html">PWMC_ICS_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:ga7e99fce0dfd737b3f9b15aba2f4ca695"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains the TIMx Break2 event interrupt.  <a href="group___i_c_s__pwm__curr__fdbk.html#ga7e99fce0dfd737b3f9b15aba2f4ca695">More...</a><br /></td></tr>
<tr class="separator:ga7e99fce0dfd737b3f9b15aba2f4ca695"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga940e4d138c7fc3ef34dd1cc1c16bb6f9"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_c_s__pwm__curr__fdbk.html#ga940e4d138c7fc3ef34dd1cc1c16bb6f9">ICS_BRK_IRQHandler</a> (<a class="el" href="struct_p_w_m_c___i_c_s___handle__t.html">PWMC_ICS_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:ga940e4d138c7fc3ef34dd1cc1c16bb6f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains the TIMx Break1 event interrupt.  <a href="group___i_c_s__pwm__curr__fdbk.html#ga940e4d138c7fc3ef34dd1cc1c16bb6f9">More...</a><br /></td></tr>
<tr class="separator:ga940e4d138c7fc3ef34dd1cc1c16bb6f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac2bd06fbeb08b5e26dcfe9d4a01b4e36"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_c_s__pwm__curr__fdbk.html#gac2bd06fbeb08b5e26dcfe9d4a01b4e36">ICS_IsOverCurrentOccurred</a> (<a class="el" href="group__pwm__curr__fdbk.html#ga5febe836591f0388113c624ad3e1a16a">PWMC_Handle_t</a> *pHdl)</td></tr>
<tr class="memdesc:gac2bd06fbeb08b5e26dcfe9d4a01b4e36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if an overcurrent occurred since last call.  <a href="group___i_c_s__pwm__curr__fdbk.html#gac2bd06fbeb08b5e26dcfe9d4a01b4e36">More...</a><br /></td></tr>
<tr class="separator:gac2bd06fbeb08b5e26dcfe9d4a01b4e36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaa2ca5727a496e0b4256e7613a520580"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_c_s__pwm__curr__fdbk.html#gaaa2ca5727a496e0b4256e7613a520580">ICS_SetOffsetCalib</a> (<a class="el" href="group__pwm__curr__fdbk.html#ga5febe836591f0388113c624ad3e1a16a">PWMC_Handle_t</a> *pHdl, <a class="el" href="struct_polarization_offsets__t.html">PolarizationOffsets_t</a> *offsets)</td></tr>
<tr class="memdesc:gaaa2ca5727a496e0b4256e7613a520580"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores in <code>pHdl</code> handler the calibrated <code>offsets</code>.  <a href="group___i_c_s__pwm__curr__fdbk.html#gaaa2ca5727a496e0b4256e7613a520580">More...</a><br /></td></tr>
<tr class="separator:gaaa2ca5727a496e0b4256e7613a520580"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae5c18711a176e3374402d17218ea58ba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_c_s__pwm__curr__fdbk.html#gae5c18711a176e3374402d17218ea58ba">ICS_GetOffsetCalib</a> (<a class="el" href="group__pwm__curr__fdbk.html#ga5febe836591f0388113c624ad3e1a16a">PWMC_Handle_t</a> *pHdl, <a class="el" href="struct_polarization_offsets__t.html">PolarizationOffsets_t</a> *offsets)</td></tr>
<tr class="memdesc:gae5c18711a176e3374402d17218ea58ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the calibrated <code>offsets</code> stored in <code>pHdl</code>.  <a href="group___i_c_s__pwm__curr__fdbk.html#gae5c18711a176e3374402d17218ea58ba">More...</a><br /></td></tr>
<tr class="separator:gae5c18711a176e3374402d17218ea58ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga40602acc0930b0921f2e19d6e8f99ae6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_c_s__pwm__curr__fdbk.html#ga40602acc0930b0921f2e19d6e8f99ae6">ICS_CurrentReadingCalibration</a> (<a class="el" href="group__pwm__curr__fdbk.html#ga5febe836591f0388113c624ad3e1a16a">PWMC_Handle_t</a> *pHdl)</td></tr>
<tr class="memdesc:ga40602acc0930b0921f2e19d6e8f99ae6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores into the <code>pHdl</code> handler the voltage present on Ia and Ib current feedback analog channels when no current is flowing into the motor.  <a href="group___i_c_s__pwm__curr__fdbk.html#ga40602acc0930b0921f2e19d6e8f99ae6">More...</a><br /></td></tr>
<tr class="separator:ga40602acc0930b0921f2e19d6e8f99ae6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaac7f323a4ae0427b3640f037443fd053"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_c_s__pwm__curr__fdbk.html#gaac7f323a4ae0427b3640f037443fd053">ICS_HFCurrentsCalibration</a> (<a class="el" href="group__pwm__curr__fdbk.html#ga5febe836591f0388113c624ad3e1a16a">PWMC_Handle_t</a> *pHdl, <a class="el" href="structab__t.html">ab_t</a> *pStator_Currents)</td></tr>
<tr class="memdesc:gaac7f323a4ae0427b3640f037443fd053"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sums up injected conversion data into wPhaseXOffset.  <a href="group___i_c_s__pwm__curr__fdbk.html#gaac7f323a4ae0427b3640f037443fd053">More...</a><br /></td></tr>
<tr class="separator:gaac7f323a4ae0427b3640f037443fd053"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >ICS, 2 ADCs, PWM &amp; Current Feedback implementation for F30X, F4XX, F7XX, G4XX and L4XX MCUs. </p>
<p >This component is used in applications based on STM32 MCUs and using an Insulated Current Sensors topology. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gad75951e992ab36652c43fec2ae492b08" name="gad75951e992ab36652c43fec2ae492b08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad75951e992ab36652c43fec2ae492b08">&#9670;&#160;</a></span>SOFOC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SOFOC&#160;&#160;&#160;0x0008u</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >This flag is reset at the beginning of FOC and it is set in the TIM UP IRQ. If at the end of FOC this flag is set, it means that FOC rate is too high and thus an error is generated </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga7e99fce0dfd737b3f9b15aba2f4ca695" name="ga7e99fce0dfd737b3f9b15aba2f4ca695"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7e99fce0dfd737b3f9b15aba2f4ca695">&#9670;&#160;</a></span>ICS_BRK2_IRQHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void * ICS_BRK2_IRQHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_p_w_m_c___i_c_s___handle__t.html">PWMC_ICS_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Contains the TIMx Break2 event interrupt. </p>
<p >Absent in F4XX and F7XX.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>Handler of the current instance of the PWM component. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga940e4d138c7fc3ef34dd1cc1c16bb6f9" name="ga940e4d138c7fc3ef34dd1cc1c16bb6f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga940e4d138c7fc3ef34dd1cc1c16bb6f9">&#9670;&#160;</a></span>ICS_BRK_IRQHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void * ICS_BRK_IRQHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_p_w_m_c___i_c_s___handle__t.html">PWMC_ICS_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Contains the TIMx Break1 event interrupt. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>Handler of the current instance of the PWM component. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga40602acc0930b0921f2e19d6e8f99ae6" name="ga40602acc0930b0921f2e19d6e8f99ae6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga40602acc0930b0921f2e19d6e8f99ae6">&#9670;&#160;</a></span>ICS_CurrentReadingCalibration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void ICS_CurrentReadingCalibration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__pwm__curr__fdbk.html#ga5febe836591f0388113c624ad3e1a16a">PWMC_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHdl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores into the <code>pHdl</code> handler the voltage present on Ia and Ib current feedback analog channels when no current is flowing into the motor. </p>
<p >Called ICS_CurrentReadingPolarization in G4XX. </p>

</div>
</div>
<a id="gae5c18711a176e3374402d17218ea58ba" name="gae5c18711a176e3374402d17218ea58ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae5c18711a176e3374402d17218ea58ba">&#9670;&#160;</a></span>ICS_GetOffsetCalib()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void ICS_GetOffsetCalib </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__pwm__curr__fdbk.html#ga5febe836591f0388113c624ad3e1a16a">PWMC_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHdl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_polarization_offsets__t.html">PolarizationOffsets_t</a> *&#160;</td>
          <td class="paramname"><em>offsets</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the calibrated <code>offsets</code> stored in <code>pHdl</code>. </p>

</div>
</div>
<a id="gab34b30b8632e23a844a505cfa9f8c1d3" name="gab34b30b8632e23a844a505cfa9f8c1d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab34b30b8632e23a844a505cfa9f8c1d3">&#9670;&#160;</a></span>ICS_GetPhaseCurrents()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void ICS_GetPhaseCurrents </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__pwm__curr__fdbk.html#ga5febe836591f0388113c624ad3e1a16a">PWMC_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHdl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structab__t.html">ab_t</a> *&#160;</td>
          <td class="paramname"><em>pStator_Currents</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes and stores in <code>pHdl</code> handler the latest converted motor phase currents in <code>pStator_Currents</code> <a class="el" href="structab__t.html" title="Two components a,b type definition.">ab_t</a> format. </p>

</div>
</div>
<a id="gaac7f323a4ae0427b3640f037443fd053" name="gaac7f323a4ae0427b3640f037443fd053"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaac7f323a4ae0427b3640f037443fd053">&#9670;&#160;</a></span>ICS_HFCurrentsCalibration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void ICS_HFCurrentsCalibration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__pwm__curr__fdbk.html#ga5febe836591f0388113c624ad3e1a16a">PWMC_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHdl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structab__t.html">ab_t</a> *&#160;</td>
          <td class="paramname"><em>pStator_Currents</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sums up injected conversion data into wPhaseXOffset. </p>
<p >It is called only during current calibration. Called ICS_HFCurrentsPolarization in G4XX.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHdl</td><td>Handler of the current instance of the PWM component. </td></tr>
    <tr><td class="paramname">pStator_Currents</td><td>Pointer to the structure that will receive motor current of phase A and B in <a class="el" href="structab__t.html" title="Two components a,b type definition.">ab_t</a> format. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gac918b96caa9b352317d710bfb6ee392b" name="gac918b96caa9b352317d710bfb6ee392b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac918b96caa9b352317d710bfb6ee392b">&#9670;&#160;</a></span>ICS_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void ICS_Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_p_w_m_c___i_c_s___handle__t.html">PWMC_ICS_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes TIMx, ADC, GPIO and NVIC for current reading in ICS configuration using STM32F30X. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>Handler of the current instance of the PWM component. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gac2bd06fbeb08b5e26dcfe9d4a01b4e36" name="gac2bd06fbeb08b5e26dcfe9d4a01b4e36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac2bd06fbeb08b5e26dcfe9d4a01b4e36">&#9670;&#160;</a></span>ICS_IsOverCurrentOccurred()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak uint16_t ICS_IsOverCurrentOccurred </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__pwm__curr__fdbk.html#ga5febe836591f0388113c624ad3e1a16a">PWMC_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHdl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if an overcurrent occurred since last call. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHdl</td><td>Handler of the current instance of the PWM component. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">uint16_t</td><td>Returns <a class="el" href="group___m_c___type.html#ga1e85035b6829c4aa817cc7f9c6056a23" title="Error: Emergency input (Over current).">MC_BREAK_IN</a> if an overcurrent has been detected since last method call, <a class="el" href="group___m_c___type.html#ga6d39359a080c884fa7512bc2b444e43e" title="No error.">MC_NO_FAULTS</a> otherwise. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaaa2ca5727a496e0b4256e7613a520580" name="gaaa2ca5727a496e0b4256e7613a520580"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaaa2ca5727a496e0b4256e7613a520580">&#9670;&#160;</a></span>ICS_SetOffsetCalib()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void ICS_SetOffsetCalib </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__pwm__curr__fdbk.html#ga5febe836591f0388113c624ad3e1a16a">PWMC_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHdl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_polarization_offsets__t.html">PolarizationOffsets_t</a> *&#160;</td>
          <td class="paramname"><em>offsets</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores in <code>pHdl</code> handler the calibrated <code>offsets</code>. </p>

</div>
</div>
<a id="gaac9860153f6b2fb18619be71f81c545d" name="gaac9860153f6b2fb18619be71f81c545d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaac9860153f6b2fb18619be71f81c545d">&#9670;&#160;</a></span>ICS_SwitchOffPWM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void ICS_SwitchOffPWM </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__pwm__curr__fdbk.html#ga5febe836591f0388113c624ad3e1a16a">PWMC_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHdl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disables PWM generation on the proper Timer peripheral acting on MOE bit. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHdl</td><td>Handler of the current instance of the PWM component. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga6a51c44b5df82019a141f25b71aaa3f7" name="ga6a51c44b5df82019a141f25b71aaa3f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6a51c44b5df82019a141f25b71aaa3f7">&#9670;&#160;</a></span>ICS_SwitchOnPWM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void ICS_SwitchOnPWM </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__pwm__curr__fdbk.html#ga5febe836591f0388113c624ad3e1a16a">PWMC_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHdl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enables PWM generation on the proper Timer peripheral acting on MOE bit. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHdl</td><td>Handler of the current instance of the PWM component. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaac27e792dc9a393534fce45682199404" name="gaac27e792dc9a393534fce45682199404"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaac27e792dc9a393534fce45682199404">&#9670;&#160;</a></span>ICS_TIMx_UP_IRQHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void * ICS_TIMx_UP_IRQHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_p_w_m_c___i_c_s___handle__t.html">PWMC_ICS_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Contains the TIMx Update event interrupt. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>Handler of the current instance of the PWM component. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga233065d45e00f823492adf8e4b465d2f" name="ga233065d45e00f823492adf8e4b465d2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga233065d45e00f823492adf8e4b465d2f">&#9670;&#160;</a></span>ICS_TurnOnLowSides()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void ICS_TurnOnLowSides </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__pwm__curr__fdbk.html#ga5febe836591f0388113c624ad3e1a16a">PWMC_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHdl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ticks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turns on low sides switches. </p>
<p >This function is intended to be used for charging boot capacitors of driving section. It has to be called on each motor start-up when using high voltage drivers.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHdl</td><td>Handler of the current instance of the PWM component. </td></tr>
    <tr><td class="paramname">ticks</td><td>Timer ticks value to be applied Min value: 0 (low sides ON) Max value: PWM_PERIOD_CYCLES/2 (low sides OFF) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga8bea853a98287d4d857bf4e06296a1a6" name="ga8bea853a98287d4d857bf4e06296a1a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8bea853a98287d4d857bf4e06296a1a6">&#9670;&#160;</a></span>ICS_WriteTIMRegisters()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak uint16_t ICS_WriteTIMRegisters </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__pwm__curr__fdbk.html#ga5febe836591f0388113c624ad3e1a16a">PWMC_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHdl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes into peripheral registers the new duty cycle and sampling point. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHdl</td><td>Handler of the current instance of the PWM component. </td></tr>
    <tr><td class="paramname">SamplingPoint</td><td>Point at which the ADC will be triggered, written in timer clock counts. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">uint16_t</td><td>Returns <a class="el" href="group___m_c___type.html#ga53baebe4a3ba319ccc2beeebbcc4aefb" title="No error.">MC_NO_ERROR</a> if no error occurred or <a class="el" href="group___m_c___type.html#gae6e765beffae40be17d8676f836fadb2" title="Error: FOC rate to high.">MC_DURATION</a> if the duty cycles were set too late for being taken into account in the next PWM cycle. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.9.5-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
&copy; 2022, ST Microelectronics &#160;<a href="http://st.com">
<img class="footer" src="ST_logo_footer.png" alt="ST Microelectronics"/>
</a>
</small></address>
</body>
</html>
