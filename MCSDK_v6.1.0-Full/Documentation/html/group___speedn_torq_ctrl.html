<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STM32 Motor Control SDK: Speed &amp; Torque Control</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
  tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true
    }
});
</script>
<script type="text/javascript" async="async" src="./mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="styleSheetFile.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="motor_control.png"/></td>
  <td id="projectalign">
   <div id="projectname">STM32 Motor Control SDK<span id="projectnumber">&#160;MCFW-6.1.0</span>
   </div>
   <div id="projectbrief">Software Development Kit to build applications driving PMSM Motors with STM32</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Speed &amp; Torque Control<div class="ingroups"><a class="el" href="group___m_c_s_d_k.html">MCSDK</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Speed &amp; Torque Control component of the Motor Control SDK.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:speed__torq__ctrl_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speed__torq__ctrl_8h.html">speed_torq_ctrl.h</a></td></tr>
<tr class="memdesc:speed__torq__ctrl_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">This file contains all definitions and functions prototypes for the Speed &amp; Torque Control component of the Motor Control SDK. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:speed__torq__ctrl_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="speed__torq__ctrl_8c.html">speed_torq_ctrl.c</a></td></tr>
<tr class="memdesc:speed__torq__ctrl_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This file provides firmware functions that implement the following features of the Speed &amp; Torque Control component of the Motor Control SDK. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Speed &amp; Torque Control parameters definition.  <a href="struct_speedn_torq_ctrl___handle__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gadd7953125018f38abb1643911a450363"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_torq_ctrl.html#gadd7953125018f38abb1643911a450363">STC_Init</a> (<a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *pHandle, <a class="el" href="struct_p_i_d___handle__t.html">PID_Handle_t</a> *pPI, <a class="el" href="struct_speedn_pos_fdbk___handle__t.html">SpeednPosFdbk_Handle_t</a> *SPD_Handle)</td></tr>
<tr class="memdesc:gadd7953125018f38abb1643911a450363"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes all the object variables.  <a href="group___speedn_torq_ctrl.html#gadd7953125018f38abb1643911a450363">More...</a><br /></td></tr>
<tr class="separator:gadd7953125018f38abb1643911a450363"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae9f28ab520651ddb76611930285f384c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_torq_ctrl.html#gae9f28ab520651ddb76611930285f384c">STC_Clear</a> (<a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gae9f28ab520651ddb76611930285f384c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the integral term of speed regulator if STC is set in speed mode.  <a href="group___speedn_torq_ctrl.html#gae9f28ab520651ddb76611930285f384c">More...</a><br /></td></tr>
<tr class="separator:gae9f28ab520651ddb76611930285f384c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga46122fd6aac6cf8474dc0f3a883882a6"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_torq_ctrl.html#ga46122fd6aac6cf8474dc0f3a883882a6">STC_GetMecSpeedRefUnit</a> (<a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:ga46122fd6aac6cf8474dc0f3a883882a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the current mechanical rotor speed reference <a class="el" href="struct_speedn_torq_ctrl___handle__t.html#a56108d57439a469d96e7db6af9ef6036">SpeedRefUnitExt</a> expressed in the unit defined by <a class="el" href="md_docs_measurement_units.html">SPEED_UNIT</a>.  <a href="group___speedn_torq_ctrl.html#ga46122fd6aac6cf8474dc0f3a883882a6">More...</a><br /></td></tr>
<tr class="separator:ga46122fd6aac6cf8474dc0f3a883882a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6e993c391f5920a9147eb22e06e91246"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_torq_ctrl.html#ga6e993c391f5920a9147eb22e06e91246">STC_GetTorqueRef</a> (<a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:ga6e993c391f5920a9147eb22e06e91246"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the current motor torque reference.  <a href="group___speedn_torq_ctrl.html#ga6e993c391f5920a9147eb22e06e91246">More...</a><br /></td></tr>
<tr class="separator:ga6e993c391f5920a9147eb22e06e91246"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3989b734396ac9b27e8315715f082d65"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_torq_ctrl.html#ga3989b734396ac9b27e8315715f082d65">STC_SetControlMode</a> (<a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *pHandle, <a class="el" href="group___m_c___type.html#ga93791db1e1974fe42cab1e0a9c35e21e">MC_ControlMode_t</a> bMode)</td></tr>
<tr class="memdesc:ga3989b734396ac9b27e8315715f082d65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the modality of the speed and torque controller <a class="el" href="struct_speedn_torq_ctrl___handle__t.html#a8e085ef65c133279d41ddaf6523e0d67">Mode</a>.  <a href="group___speedn_torq_ctrl.html#ga3989b734396ac9b27e8315715f082d65">More...</a><br /></td></tr>
<tr class="separator:ga3989b734396ac9b27e8315715f082d65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac102bda879eda1e3aa0210a97cccc99c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___m_c___type.html#ga93791db1e1974fe42cab1e0a9c35e21e">MC_ControlMode_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_torq_ctrl.html#gac102bda879eda1e3aa0210a97cccc99c">STC_GetControlMode</a> (<a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gac102bda879eda1e3aa0210a97cccc99c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the modality of the speed and torque controller <a class="el" href="struct_speedn_torq_ctrl___handle__t.html#a8e085ef65c133279d41ddaf6523e0d67">Mode</a>.  <a href="group___speedn_torq_ctrl.html#gac102bda879eda1e3aa0210a97cccc99c">More...</a><br /></td></tr>
<tr class="separator:gac102bda879eda1e3aa0210a97cccc99c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga01246d9961f11dc3a7ea9b128b6256dc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_torq_ctrl.html#ga01246d9961f11dc3a7ea9b128b6256dc">STC_ExecRamp</a> (<a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *pHandle, int16_t hTargetFinal, uint32_t hDurationms)</td></tr>
<tr class="memdesc:ga01246d9961f11dc3a7ea9b128b6256dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the execution of a ramp using new target and duration.  <a href="group___speedn_torq_ctrl.html#ga01246d9961f11dc3a7ea9b128b6256dc">More...</a><br /></td></tr>
<tr class="separator:ga01246d9961f11dc3a7ea9b128b6256dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae5bfd16a0ec16b938c86716d8b52676a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_torq_ctrl.html#gae5bfd16a0ec16b938c86716d8b52676a">STC_StopRamp</a> (<a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gae5bfd16a0ec16b938c86716d8b52676a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interrupts the execution of any previous ramp command in particular by clearing the number of steps remaining to complete the ramp <a class="el" href="struct_speedn_torq_ctrl___handle__t.html#a10e2d5b249fe0932799db07cd5a6b99a">RampRemainingStep</a>.  <a href="group___speedn_torq_ctrl.html#gae5bfd16a0ec16b938c86716d8b52676a">More...</a><br /></td></tr>
<tr class="separator:gae5bfd16a0ec16b938c86716d8b52676a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae4d57fc2d346ce4b1b4f626a42c7c2e9"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_torq_ctrl.html#gae4d57fc2d346ce4b1b4f626a42c7c2e9">STC_CalcTorqueReference</a> (<a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gae4d57fc2d346ce4b1b4f626a42c7c2e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes the new value of motor torque reference.  <a href="group___speedn_torq_ctrl.html#gae4d57fc2d346ce4b1b4f626a42c7c2e9">More...</a><br /></td></tr>
<tr class="separator:gae4d57fc2d346ce4b1b4f626a42c7c2e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacefd4e461ba93d1d67ed7128c47ddfa5"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_torq_ctrl.html#gacefd4e461ba93d1d67ed7128c47ddfa5">STC_GetMecSpeedRefUnitDefault</a> (<a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gacefd4e461ba93d1d67ed7128c47ddfa5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the Default mechanical rotor speed reference <a class="el" href="struct_speedn_torq_ctrl___handle__t.html#af006c9a82177a9121060ea15e5e23289">MecSpeedRefUnitDefault</a> expressed in the unit defined by <a class="el" href="md_docs_measurement_units.html">SPEED_UNIT</a>.  <a href="group___speedn_torq_ctrl.html#gacefd4e461ba93d1d67ed7128c47ddfa5">More...</a><br /></td></tr>
<tr class="separator:gacefd4e461ba93d1d67ed7128c47ddfa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad28d943fe2ec3dedf509f583553c233b"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_torq_ctrl.html#gad28d943fe2ec3dedf509f583553c233b">STC_GetMaxAppPositiveMecSpeedUnit</a> (<a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gad28d943fe2ec3dedf509f583553c233b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the Application maximum positive value of rotor speed <a class="el" href="struct_speedn_torq_ctrl___handle__t.html#a8d8f9a23024de5ea2af3eb17309d8aff">MaxAppPositiveMecSpeedUnit</a>. Expressed in the unit defined by <a class="el" href="md_docs_measurement_units.html">SPEED_UNIT</a>.  <a href="group___speedn_torq_ctrl.html#gad28d943fe2ec3dedf509f583553c233b">More...</a><br /></td></tr>
<tr class="separator:gad28d943fe2ec3dedf509f583553c233b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaea52867ab09b9615c1a1876657da2d36"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_torq_ctrl.html#gaea52867ab09b9615c1a1876657da2d36">STC_GetMinAppNegativeMecSpeedUnit</a> (<a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gaea52867ab09b9615c1a1876657da2d36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the Application minimum negative value of rotor speed <a class="el" href="struct_speedn_torq_ctrl___handle__t.html#af106c5d58617c5a283ae3b4bc3f975c5">MinAppNegativeMecSpeedUnit</a>. Expressed in the unit defined by <a class="el" href="md_docs_measurement_units.html">SPEED_UNIT</a>.  <a href="group___speedn_torq_ctrl.html#gaea52867ab09b9615c1a1876657da2d36">More...</a><br /></td></tr>
<tr class="separator:gaea52867ab09b9615c1a1876657da2d36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga99eef4c8363fd83f3b306ac7a2a046ba"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_torq_ctrl.html#ga99eef4c8363fd83f3b306ac7a2a046ba">STC_RampCompleted</a> (<a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:ga99eef4c8363fd83f3b306ac7a2a046ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the settled speed or torque ramp has been completed by checking zero value of <a class="el" href="struct_speedn_torq_ctrl___handle__t.html#a10e2d5b249fe0932799db07cd5a6b99a">RampRemainingStep</a>.  <a href="group___speedn_torq_ctrl.html#ga99eef4c8363fd83f3b306ac7a2a046ba">More...</a><br /></td></tr>
<tr class="separator:ga99eef4c8363fd83f3b306ac7a2a046ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeaebcea37520d4b12834ee0926561791"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_torq_ctrl.html#gaeaebcea37520d4b12834ee0926561791">STC_StopSpeedRamp</a> (<a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gaeaebcea37520d4b12834ee0926561791"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the execution of speed ramp by clearing the number of steps remaining to complete the ramp.  <a href="group___speedn_torq_ctrl.html#gaeaebcea37520d4b12834ee0926561791">More...</a><br /></td></tr>
<tr class="separator:gaeaebcea37520d4b12834ee0926561791"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae6417518cddcd3a660b16c441936e3c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_torq_ctrl.html#gae6417518cddcd3a660b16c441936e3c0">STC_SetSpeedSensor</a> (<a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *pHandle, <a class="el" href="struct_speedn_pos_fdbk___handle__t.html">SpeednPosFdbk_Handle_t</a> *SPD_Handle)</td></tr>
<tr class="memdesc:gae6417518cddcd3a660b16c441936e3c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets in real time the speed sensor utilized by the STC.  <a href="group___speedn_torq_ctrl.html#gae6417518cddcd3a660b16c441936e3c0">More...</a><br /></td></tr>
<tr class="separator:gae6417518cddcd3a660b16c441936e3c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad7786d5fbec80a0bcd5301bedc54172c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_speedn_pos_fdbk___handle__t.html">SpeednPosFdbk_Handle_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_torq_ctrl.html#gad7786d5fbec80a0bcd5301bedc54172c">STC_GetSpeedSensor</a> (<a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gad7786d5fbec80a0bcd5301bedc54172c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the speed sensor utilized by the FOC.  <a href="group___speedn_torq_ctrl.html#gad7786d5fbec80a0bcd5301bedc54172c">More...</a><br /></td></tr>
<tr class="separator:gad7786d5fbec80a0bcd5301bedc54172c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5580590c0d63de728a7e100bcb3191f9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structqd__t.html">qd_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_torq_ctrl.html#ga5580590c0d63de728a7e100bcb3191f9">STC_GetDefaultIqdref</a> (<a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:ga5580590c0d63de728a7e100bcb3191f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the default values of Iqdref.  <a href="group___speedn_torq_ctrl.html#ga5580590c0d63de728a7e100bcb3191f9">More...</a><br /></td></tr>
<tr class="separator:ga5580590c0d63de728a7e100bcb3191f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf7b61f87b3d7f7248a77baa2cadf38a0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_torq_ctrl.html#gaf7b61f87b3d7f7248a77baa2cadf38a0">STC_SetNominalCurrent</a> (<a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *pHandle, uint16_t hNominalCurrent)</td></tr>
<tr class="memdesc:gaf7b61f87b3d7f7248a77baa2cadf38a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Changes the nominal current by setting new values of <a class="el" href="struct_speedn_torq_ctrl___handle__t.html#a27a5ec94bd8fecf17888047f9ed38b39">MaxPositiveTorque</a> and <a class="el" href="struct_speedn_torq_ctrl___handle__t.html#a6cc7c8089887401ec2d3a6b83b248fcf">MinNegativeTorque</a>.  <a href="group___speedn_torq_ctrl.html#gaf7b61f87b3d7f7248a77baa2cadf38a0">More...</a><br /></td></tr>
<tr class="separator:gaf7b61f87b3d7f7248a77baa2cadf38a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad1f078d277a2dcdc489b81581ecd890d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_torq_ctrl.html#gad1f078d277a2dcdc489b81581ecd890d">STC_ForceSpeedReferenceToCurrentSpeed</a> (<a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gad1f078d277a2dcdc489b81581ecd890d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Forces the speed reference <a class="el" href="struct_speedn_torq_ctrl___handle__t.html#a56108d57439a469d96e7db6af9ef6036">SpeedRefUnitExt</a> to the current speed.  <a href="group___speedn_torq_ctrl.html#gad1f078d277a2dcdc489b81581ecd890d">More...</a><br /></td></tr>
<tr class="separator:gad1f078d277a2dcdc489b81581ecd890d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >Speed &amp; Torque Control component of the Motor Control SDK. </p>
<p >The MCSDK is able to control the startup phase of the motor in a torque Mode. In this case the STC component will be used to manage a torque reference and a torque ramp. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gae4d57fc2d346ce4b1b4f626a42c7c2e9" name="gae4d57fc2d346ce4b1b4f626a42c7c2e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae4d57fc2d346ce4b1b4f626a42c7c2e9">&#9670;&#160;</a></span>STC_CalcTorqueReference()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak int16_t STC_CalcTorqueReference </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes the new value of motor torque reference. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the SpeednTorqCtrl component. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int16_t</td><td>motor torque reference. This value represents actually the Iq current expressed in digit. To convert current expressed in Amps to current expressed in digit is possible to use the formula:<br  />
 Current(digit) = [Current(Amp) * 65536 * Rshunt * Aop] / Vdd micro</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>Must be called at fixed time equal to hSTCFrequencyHz. It is called passing as parameter the speed sensor used to perform the speed regulation.</li>
<li>Called during START and ALIGNEMENT states of the MC state machine into MediumFrequencyTask. </li>
</ul>

</div>
</div>
<a id="gae9f28ab520651ddb76611930285f384c" name="gae9f28ab520651ddb76611930285f384c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae9f28ab520651ddb76611930285f384c">&#9670;&#160;</a></span>STC_Clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void STC_Clear </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resets the integral term of speed regulator if STC is set in speed mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the SpeednTorqCtrl component. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">none.</td><td></td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>Called before each motor restart. </li>
</ul>

</div>
</div>
<a id="ga01246d9961f11dc3a7ea9b128b6256dc" name="ga01246d9961f11dc3a7ea9b128b6256dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga01246d9961f11dc3a7ea9b128b6256dc">&#9670;&#160;</a></span>STC_ExecRamp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak bool STC_ExecRamp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>hTargetFinal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>hDurationms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts the execution of a ramp using new target and duration. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the SpeednTorqCtrl component. </td></tr>
    <tr><td class="paramname">hTargetFinal</td><td>final value of command. This is different accordingly the STC modality. If STC is in Torque mode hTargetFinal is the value of motor torque reference at the end of the ramp. This value represents actually the Iq current expressed in digit. To convert current expressed in Amps to current expressed in digit is possible to use the formula:<br  />
 Current(digit) = [Current(Amp) * 65536 * Rshunt * Aop] / Vdd micro<br  />
 If STC is in Speed mode hTargetFinal is the value of mechanical rotor speed reference at the end of the ramp expressed in the unit defined by <a class="el" href="md_docs_measurement_units.html">SPEED_UNIT</a>. </td></tr>
    <tr><td class="paramname">hDurationms</td><td>the duration of the ramp expressed in milliseconds. It is possible to set 0 to perform an instantaneous change in the value. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>returning false if the absolute value of hTargetFinal is out of the boundary of the application (Above max application speed or max application torque or below min application speed depending on current modality of TSC) in this case the command is ignored and the previous ramp is not interrupted, otherwise it returns true.</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>This command interrupts the execution of any previous ramp command. The generated ramp will be in the modality previously set by <a class="el" href="group___speedn_torq_ctrl.html#ga3989b734396ac9b27e8315715f082d65" title="Sets the modality of the speed and torque controller Mode.">STC_SetControlMode</a> method.</li>
<li>Called during motor profiling, <a class="el" href="group___rev_up_ctrl.html">Rev-Up Control</a> phase, <a class="el" href="group___enc_align_ctrl.html">Encoder Alignment Control</a>, <a class="el" href="group___position_control.html">Position Control</a> loop or speed regulation with SpeedRegulatorPotentiometer Speed potentiometer. </li>
</ul>

</div>
</div>
<a id="gad1f078d277a2dcdc489b81581ecd890d" name="gad1f078d277a2dcdc489b81581ecd890d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad1f078d277a2dcdc489b81581ecd890d">&#9670;&#160;</a></span>STC_ForceSpeedReferenceToCurrentSpeed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void STC_ForceSpeedReferenceToCurrentSpeed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Forces the speed reference <a class="el" href="struct_speedn_torq_ctrl___handle__t.html#a56108d57439a469d96e7db6af9ef6036">SpeedRefUnitExt</a> to the current speed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the SpeednTorqCtrl component. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">none</td><td></td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>Called during the CHARGE_BOOT_CAP, SWITCH_OVER and WAIT_STOP_MOTOR states of the MC state machine into MediumFrequencyTask to initialize the speed reference. </li>
</ul>

</div>
</div>
<a id="gac102bda879eda1e3aa0210a97cccc99c" name="gac102bda879eda1e3aa0210a97cccc99c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac102bda879eda1e3aa0210a97cccc99c">&#9670;&#160;</a></span>STC_GetControlMode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak <a class="el" href="group___m_c___type.html#ga93791db1e1974fe42cab1e0a9c35e21e">MC_ControlMode_t</a> STC_GetControlMode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the modality of the speed and torque controller <a class="el" href="struct_speedn_torq_ctrl___handle__t.html#a8e085ef65c133279d41ddaf6523e0d67">Mode</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the SpeednTorqCtrl component. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MC_ControlMode_t</td><td>modality of STC. It can be one of these two values: MCM_TORQUE_MODE or MCM_SPEED_MODE.</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>Called by SpeedRegulatorPotentiometer Speed potentiometer component to manage new speed reference. </li>
</ul>

</div>
</div>
<a id="ga5580590c0d63de728a7e100bcb3191f9" name="ga5580590c0d63de728a7e100bcb3191f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5580590c0d63de728a7e100bcb3191f9">&#9670;&#160;</a></span>STC_GetDefaultIqdref()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak <a class="el" href="structqd__t.html">qd_t</a> STC_GetDefaultIqdref </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the default values of Iqdref. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the SpeednTorqCtrl component. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">default</td><td>values of Iqdref.</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>Called during the boot phase of the MC process. </li>
</ul>

</div>
</div>
<a id="gad28d943fe2ec3dedf509f583553c233b" name="gad28d943fe2ec3dedf509f583553c233b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad28d943fe2ec3dedf509f583553c233b">&#9670;&#160;</a></span>STC_GetMaxAppPositiveMecSpeedUnit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak uint16_t STC_GetMaxAppPositiveMecSpeedUnit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the Application maximum positive value of rotor speed <a class="el" href="struct_speedn_torq_ctrl___handle__t.html#a8d8f9a23024de5ea2af3eb17309d8aff">MaxAppPositiveMecSpeedUnit</a>. Expressed in the unit defined by <a class="el" href="md_docs_measurement_units.html">SPEED_UNIT</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the SpeednTorqCtrl component.</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>Not used into current implementation. </li>
</ul>

</div>
</div>
<a id="ga46122fd6aac6cf8474dc0f3a883882a6" name="ga46122fd6aac6cf8474dc0f3a883882a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga46122fd6aac6cf8474dc0f3a883882a6">&#9670;&#160;</a></span>STC_GetMecSpeedRefUnit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak int16_t STC_GetMecSpeedRefUnit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the current mechanical rotor speed reference <a class="el" href="struct_speedn_torq_ctrl___handle__t.html#a56108d57439a469d96e7db6af9ef6036">SpeedRefUnitExt</a> expressed in the unit defined by <a class="el" href="md_docs_measurement_units.html">SPEED_UNIT</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the SpeednTorqCtrl component. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int16_t</td><td>current mechanical rotor speed reference expressed in the unit defined by <a class="el" href="md_docs_measurement_units.html">SPEED_UNIT</a>.</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>Called at MC boot procedure and for speed monitoring through MotorPilote. </li>
</ul>

</div>
</div>
<a id="gacefd4e461ba93d1d67ed7128c47ddfa5" name="gacefd4e461ba93d1d67ed7128c47ddfa5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacefd4e461ba93d1d67ed7128c47ddfa5">&#9670;&#160;</a></span>STC_GetMecSpeedRefUnitDefault()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak int16_t STC_GetMecSpeedRefUnitDefault </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the Default mechanical rotor speed reference <a class="el" href="struct_speedn_torq_ctrl___handle__t.html#af006c9a82177a9121060ea15e5e23289">MecSpeedRefUnitDefault</a> expressed in the unit defined by <a class="el" href="md_docs_measurement_units.html">SPEED_UNIT</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the SpeednTorqCtrl component. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int16_t</td><td>Default mechanical rotor speed.</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>It is the first command to STC after the start of speed ramp execution.</li>
<li>Called during the boot phase of the MC process. </li>
</ul>

</div>
</div>
<a id="gaea52867ab09b9615c1a1876657da2d36" name="gaea52867ab09b9615c1a1876657da2d36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaea52867ab09b9615c1a1876657da2d36">&#9670;&#160;</a></span>STC_GetMinAppNegativeMecSpeedUnit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak int16_t STC_GetMinAppNegativeMecSpeedUnit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the Application minimum negative value of rotor speed <a class="el" href="struct_speedn_torq_ctrl___handle__t.html#af106c5d58617c5a283ae3b4bc3f975c5">MinAppNegativeMecSpeedUnit</a>. Expressed in the unit defined by <a class="el" href="md_docs_measurement_units.html">SPEED_UNIT</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the SpeednTorqCtrl component.</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>Not used into current implementation. </li>
</ul>

</div>
</div>
<a id="gad7786d5fbec80a0bcd5301bedc54172c" name="gad7786d5fbec80a0bcd5301bedc54172c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad7786d5fbec80a0bcd5301bedc54172c">&#9670;&#160;</a></span>STC_GetSpeedSensor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak <a class="el" href="struct_speedn_pos_fdbk___handle__t.html">SpeednPosFdbk_Handle_t</a> * STC_GetSpeedSensor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the speed sensor utilized by the FOC. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the SpeednTorqCtrl component. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="struct_speedn_pos_fdbk___handle__t.html" title="SpeednPosFdbk handles definitions of mechanical and electrical speed, mechanical acceleration,...">SpeednPosFdbk_Handle_t</a></td><td>speed sensor utilized by the FOC.</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>Called as soon as component parameters are required by MC FW. </li>
</ul>

</div>
</div>
<a id="ga6e993c391f5920a9147eb22e06e91246" name="ga6e993c391f5920a9147eb22e06e91246"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6e993c391f5920a9147eb22e06e91246">&#9670;&#160;</a></span>STC_GetTorqueRef()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak int16_t STC_GetTorqueRef </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the current motor torque reference. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the SpeednTorqCtrl component. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int16_t</td><td>current motor torque reference. This value represents actually the Iq current expressed in digit.</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li><a class="el" href="struct_speedn_torq_ctrl___handle__t.html#af9957635d667cb30ce0619b4a4d21dfd">TorqueRef</a> represents actually the Iq current reference expressed in digit.</li>
<li>To convert current expressed in digit to current expressed in Amps is possible to use the formula:<br  />
Current(Amp) = [Current(digit) * Vdd micro] / [65536 * Rshunt * Aop]</li>
<li>Called during <a class="el" href="group___speedn_torq_ctrl.html#ga01246d9961f11dc3a7ea9b128b6256dc" title="Starts the execution of a ramp using new target and duration.">STC_ExecRamp</a> execution. </li>
</ul>

</div>
</div>
<a id="gadd7953125018f38abb1643911a450363" name="gadd7953125018f38abb1643911a450363"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadd7953125018f38abb1643911a450363">&#9670;&#160;</a></span>STC_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void STC_Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_p_i_d___handle__t.html">PID_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pPI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_speedn_pos_fdbk___handle__t.html">SpeednPosFdbk_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>SPD_Handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes all the object variables. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the SpeednTorqCtrl component. </td></tr>
    <tr><td class="paramname">pPI</td><td>the PI object used as controller for the speed regulation. It can be equal to MC_NULL if the STC is initialized in torque mode and it will never be configured in speed mode. </td></tr>
    <tr><td class="paramname">SPD_Handle</td><td>the speed sensor used to perform the speed regulation. It can be equal to MC_NULL if the STC is used only in torque mode. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">none.</td><td></td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>Called once right after object creation at initialization of the whole MC core. </li>
</ul>

</div>
</div>
<a id="ga99eef4c8363fd83f3b306ac7a2a046ba" name="ga99eef4c8363fd83f3b306ac7a2a046ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga99eef4c8363fd83f3b306ac7a2a046ba">&#9670;&#160;</a></span>STC_RampCompleted()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak bool STC_RampCompleted </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if the settled speed or torque ramp has been completed by checking zero value of <a class="el" href="struct_speedn_torq_ctrl___handle__t.html#a10e2d5b249fe0932799db07cd5a6b99a">RampRemainingStep</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the SpeednTorqCtrl component. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>returning true if the ramp is completed, false otherwise.</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>Called during motor profiler tuning of HALL sensor. </li>
</ul>

</div>
</div>
<a id="ga3989b734396ac9b27e8315715f082d65" name="ga3989b734396ac9b27e8315715f082d65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3989b734396ac9b27e8315715f082d65">&#9670;&#160;</a></span>STC_SetControlMode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void STC_SetControlMode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___m_c___type.html#ga93791db1e1974fe42cab1e0a9c35e21e">MC_ControlMode_t</a>&#160;</td>
          <td class="paramname"><em>bMode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the modality of the speed and torque controller <a class="el" href="struct_speedn_torq_ctrl___handle__t.html#a8e085ef65c133279d41ddaf6523e0d67">Mode</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the SpeednTorqCtrl component. </td></tr>
    <tr><td class="paramname">bMode</td><td>modality of STC. It can be one of these two settings: MCM_TORQUE_MODE to enable the Torque mode or MCM_SPEED_MODE to enable the Speed mode. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">none</td><td></td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>Two modality are available Torque mode and Speed mode.<br  />
&ndash; In Torque mode is possible to set directly the motor torque reference or execute a motor torque ramp. This value represents actually the Iq current reference expressed in digit.<br  />
&ndash; In Speed mode is possible to set the mechanical rotor speed reference or execute a speed ramp. The required motor torque is automatically calculated by the STC.<br  />
</li>
<li>Interrupts the execution of any previous ramp command maintaining the last value of Iq by clearing <a class="el" href="struct_speedn_torq_ctrl___handle__t.html#a10e2d5b249fe0932799db07cd5a6b99a">RampRemainingStep</a>.</li>
<li>Called generally before Starting the execution of a ramp. </li>
</ul>

</div>
</div>
<a id="gaf7b61f87b3d7f7248a77baa2cadf38a0" name="gaf7b61f87b3d7f7248a77baa2cadf38a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf7b61f87b3d7f7248a77baa2cadf38a0">&#9670;&#160;</a></span>STC_SetNominalCurrent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void STC_SetNominalCurrent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>hNominalCurrent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Changes the nominal current by setting new values of <a class="el" href="struct_speedn_torq_ctrl___handle__t.html#a27a5ec94bd8fecf17888047f9ed38b39">MaxPositiveTorque</a> and <a class="el" href="struct_speedn_torq_ctrl___handle__t.html#a6cc7c8089887401ec2d3a6b83b248fcf">MinNegativeTorque</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the SpeednTorqCtrl component. </td></tr>
    <tr><td class="paramname">hNominalCurrent</td><td>represents actually the maximum Iq current expressed in digit. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">none</td><td></td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>Not used into current implementation. </li>
</ul>

</div>
</div>
<a id="gae6417518cddcd3a660b16c441936e3c0" name="gae6417518cddcd3a660b16c441936e3c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae6417518cddcd3a660b16c441936e3c0">&#9670;&#160;</a></span>STC_SetSpeedSensor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void STC_SetSpeedSensor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_speedn_pos_fdbk___handle__t.html">SpeednPosFdbk_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>SPD_Handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets in real time the speed sensor utilized by the STC. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the SpeednTorqCtrl component. </td></tr>
    <tr><td class="paramname">SPD_Handle</td><td>Speed sensor component to be set. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">none</td><td></td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>Called during tasks execution of the MC state machine into MediumFrequencyTask. </li>
</ul>

</div>
</div>
<a id="gae5bfd16a0ec16b938c86716d8b52676a" name="gae5bfd16a0ec16b938c86716d8b52676a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae5bfd16a0ec16b938c86716d8b52676a">&#9670;&#160;</a></span>STC_StopRamp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void STC_StopRamp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Interrupts the execution of any previous ramp command in particular by clearing the number of steps remaining to complete the ramp <a class="el" href="struct_speedn_torq_ctrl___handle__t.html#a10e2d5b249fe0932799db07cd5a6b99a">RampRemainingStep</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the SpeednTorqCtrl component. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">none</td><td></td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>If STC has been set in Torque mode the last value of Iq is maintained.<br  />
</li>
<li>If STC has been set in Speed mode the last value of mechanical rotor speed reference is maintained.</li>
<li>Called by MCI_StopSpeedRamp execution command. </li>
</ul>

</div>
</div>
<a id="gaeaebcea37520d4b12834ee0926561791" name="gaeaebcea37520d4b12834ee0926561791"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaeaebcea37520d4b12834ee0926561791">&#9670;&#160;</a></span>STC_StopSpeedRamp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak bool STC_StopSpeedRamp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_speedn_torq_ctrl___handle__t.html">SpeednTorqCtrl_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stops the execution of speed ramp by clearing the number of steps remaining to complete the ramp. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>handler of the current instance of the SpeednTorqCtrl component. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>returning true if the command is executed, false otherwise.</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>Not used into current implementation. </li>
</ul>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.9.5-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
&copy; 2022, ST Microelectronics &#160;<a href="http://st.com">
<img class="footer" src="ST_logo_footer.png" alt="ST Microelectronics"/>
</a>
</small></address>
</body>
</html>
