<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STM32 Motor Control SDK: State Observer PLL Speed &amp; Position Feedback</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
  tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true
    }
});
</script>
<script type="text/javascript" async="async" src="./mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="styleSheetFile.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="motor_control.png"/></td>
  <td id="projectalign">
   <div id="projectname">STM32 Motor Control SDK<span id="projectnumber">&#160;MCFW-6.1.0</span>
   </div>
   <div id="projectbrief">Software Development Kit to build applications driving PMSM Motors with STM32</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">State Observer PLL Speed &amp; Position Feedback<div class="ingroups"><a class="el" href="group___m_c_s_d_k.html">MCSDK</a> &raquo; <a class="el" href="group___speedn_pos_fdbk.html">Speed &amp; Position Feedback</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>State Observer with PLL Speed &amp; Position Feedback component of MCSDK.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:sto__pll__speed__pos__fdbk_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sto__pll__speed__pos__fdbk_8h.html">sto_pll_speed_pos_fdbk.h</a></td></tr>
<tr class="memdesc:sto__pll__speed__pos__fdbk_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">This file contains all definitions and functions prototypes for the State Observer + PLL Speed &amp; Position Feedback component of the Motor Control SDK. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:sto__pll__speed__pos__fdbk_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sto__pll__speed__pos__fdbk_8c.html">sto_pll_speed_pos_fdbk.c</a></td></tr>
<tr class="memdesc:sto__pll__speed__pos__fdbk_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This file provides firmware functions that implement the features of the State Observer + PLL Speed &amp; Position Feedback component of the Motor Control SDK. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle of the Speed and Position Feedback STO PLL component.  <a href="struct_s_t_o___p_l_l___handle__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga3eec93f65621a1e10ae7688cb7bbcb37"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga3eec93f65621a1e10ae7688cb7bbcb37">STO_PLL_Init</a> (<a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:ga3eec93f65621a1e10ae7688cb7bbcb37"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the <code>pHandle</code> of STate Observer (STO) PLL component.  <a href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga3eec93f65621a1e10ae7688cb7bbcb37">More...</a><br /></td></tr>
<tr class="separator:ga3eec93f65621a1e10ae7688cb7bbcb37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4f79267a7bdfe39e51cbd088a099d81e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga4f79267a7bdfe39e51cbd088a099d81e">STO_PLL_Return</a> (<a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *pHandle, uint8_t flag)</td></tr>
<tr class="memdesc:ga4f79267a7bdfe39e51cbd088a099d81e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Necessary empty return to implement fictitious IRQ_Handler.  <a href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga4f79267a7bdfe39e51cbd088a099d81e">More...</a><br /></td></tr>
<tr class="separator:ga4f79267a7bdfe39e51cbd088a099d81e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga331498454162f61e2aaa4a9b383435fb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga331498454162f61e2aaa4a9b383435fb">STO_PLL_Clear</a> (<a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:ga331498454162f61e2aaa4a9b383435fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears state observer component by re-initializing private variables in <code>pHandle</code>.  <a href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga331498454162f61e2aaa4a9b383435fb">More...</a><br /></td></tr>
<tr class="separator:ga331498454162f61e2aaa4a9b383435fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga70e4c3e6901e74efaaaceec3b59a6eaa"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga70e4c3e6901e74efaaaceec3b59a6eaa">STO_PLL_CalcElAngle</a> (<a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *pHandle, <a class="el" href="struct_observer___inputs__t.html">Observer_Inputs_t</a> *pInputs)</td></tr>
<tr class="memdesc:ga70e4c3e6901e74efaaaceec3b59a6eaa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the estimated electrical angle.  <a href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga70e4c3e6901e74efaaaceec3b59a6eaa">More...</a><br /></td></tr>
<tr class="separator:ga70e4c3e6901e74efaaaceec3b59a6eaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga88e1b2846db4da0ccb3faf123202dd5b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga88e1b2846db4da0ccb3faf123202dd5b">STO_PLL_CalcAvrgMecSpeedUnit</a> (<a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *pHandle, int16_t *pMecSpeedUnit)</td></tr>
<tr class="memdesc:ga88e1b2846db4da0ccb3faf123202dd5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes and returns the average mechanical speed.  <a href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga88e1b2846db4da0ccb3faf123202dd5b">More...</a><br /></td></tr>
<tr class="separator:ga88e1b2846db4da0ccb3faf123202dd5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab6e26c1ff881820b26d9f1b9b4c5eee4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#gab6e26c1ff881820b26d9f1b9b4c5eee4">STO_OTF_ResetPLL</a> (<a class="el" href="group___speedn_pos_fdbk.html#ga161a0878195349c8bcc94993b6dc1e51">STO_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gab6e26c1ff881820b26d9f1b9b4c5eee4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the PLL integral term during on-the-fly startup.  <a href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#gab6e26c1ff881820b26d9f1b9b4c5eee4">More...</a><br /></td></tr>
<tr class="separator:gab6e26c1ff881820b26d9f1b9b4c5eee4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8848cd78a5ea0e3e36425ef4254cad5a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga8848cd78a5ea0e3e36425ef4254cad5a">STO_ResetPLL</a> (<a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:ga8848cd78a5ea0e3e36425ef4254cad5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the PLL integral term.  <a href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga8848cd78a5ea0e3e36425ef4254cad5a">More...</a><br /></td></tr>
<tr class="separator:ga8848cd78a5ea0e3e36425ef4254cad5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga76deae19ffe25cf959f61a59ec8a1818"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga76deae19ffe25cf959f61a59ec8a1818">STO_PLL_IsObserverConverged</a> (<a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *pHandle, int16_t *phForcedMecSpeedUnit)</td></tr>
<tr class="memdesc:ga76deae19ffe25cf959f61a59ec8a1818"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the state observer algorithm converged.  <a href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga76deae19ffe25cf959f61a59ec8a1818">More...</a><br /></td></tr>
<tr class="separator:ga76deae19ffe25cf959f61a59ec8a1818"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9031efa920f5f11b176b0e6219dd1cb2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga9031efa920f5f11b176b0e6219dd1cb2">STO_PLL_CalcAvrgElSpeedDpp</a> (<a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:ga9031efa920f5f11b176b0e6219dd1cb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes and updates the average electrical speed.  <a href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga9031efa920f5f11b176b0e6219dd1cb2">More...</a><br /></td></tr>
<tr class="separator:ga9031efa920f5f11b176b0e6219dd1cb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga87201907a3c922e0e6bc33c0755b5158"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structalphabeta__t.html">alphabeta_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga87201907a3c922e0e6bc33c0755b5158">STO_PLL_GetEstimatedBemf</a> (<a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:ga87201907a3c922e0e6bc33c0755b5158"><td class="mdescLeft">&#160;</td><td class="mdescRight">Exports estimated Bemf alpha-beta from <code>pHandle</code>.  <a href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga87201907a3c922e0e6bc33c0755b5158">More...</a><br /></td></tr>
<tr class="separator:ga87201907a3c922e0e6bc33c0755b5158"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga23de5074c9acb6ce3a32ef26d4df3649"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structalphabeta__t.html">alphabeta_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga23de5074c9acb6ce3a32ef26d4df3649">STO_PLL_GetEstimatedCurrent</a> (<a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:ga23de5074c9acb6ce3a32ef26d4df3649"><td class="mdescLeft">&#160;</td><td class="mdescRight">Exports from <code>pHandle</code> the stator current alpha-beta as estimated by state observer.  <a href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga23de5074c9acb6ce3a32ef26d4df3649">More...</a><br /></td></tr>
<tr class="separator:ga23de5074c9acb6ce3a32ef26d4df3649"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9c9a3a68d900b7b78d0ead84e75f0d7c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga9c9a3a68d900b7b78d0ead84e75f0d7c">STO_PLL_SetObserverGains</a> (<a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *pHandle, int16_t hhC1, int16_t hhC2)</td></tr>
<tr class="memdesc:ga9c9a3a68d900b7b78d0ead84e75f0d7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores in <code>pHandle</code> the new values <code>hhC1</code> and <code>hhC2</code> for observer gains.  <a href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga9c9a3a68d900b7b78d0ead84e75f0d7c">More...</a><br /></td></tr>
<tr class="separator:ga9c9a3a68d900b7b78d0ead84e75f0d7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga736332293576d8e556dacd198e4ff959"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga736332293576d8e556dacd198e4ff959">STO_PLL_GetObserverGains</a> (<a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *pHandle, int16_t *phC2, int16_t *phC4)</td></tr>
<tr class="memdesc:ga736332293576d8e556dacd198e4ff959"><td class="mdescLeft">&#160;</td><td class="mdescRight">Exports current observer gains from <code>pHandle</code> and to parameters <code>phC2</code> and <code>phC4</code>.  <a href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga736332293576d8e556dacd198e4ff959">More...</a><br /></td></tr>
<tr class="separator:ga736332293576d8e556dacd198e4ff959"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf7281cda93671031ef5fb9a1621bbdef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#gaf7281cda93671031ef5fb9a1621bbdef">STO_GetPLLGains</a> (<a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *pHandle, int16_t *pPgain, int16_t *pIgain)</td></tr>
<tr class="memdesc:gaf7281cda93671031ef5fb9a1621bbdef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Exports current PLL gains from <code>pHandle</code> to <code>pPgain</code> and <code>pIgain</code>.  <a href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#gaf7281cda93671031ef5fb9a1621bbdef">More...</a><br /></td></tr>
<tr class="separator:gaf7281cda93671031ef5fb9a1621bbdef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac997aeee449bd164c42dea368532947a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#gac997aeee449bd164c42dea368532947a">STO_SetPLLGains</a> (<a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *pHandle, int16_t hPgain, int16_t hIgain)</td></tr>
<tr class="memdesc:gac997aeee449bd164c42dea368532947a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores in <code>pHandle</code> the new values <code>hPgain</code> and <code>hIgain</code> for PLL gains.  <a href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#gac997aeee449bd164c42dea368532947a">More...</a><br /></td></tr>
<tr class="separator:gac997aeee449bd164c42dea368532947a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga45c391ca64c6b93e73234272733002f0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga45c391ca64c6b93e73234272733002f0">STO_PLL_SetMecAngle</a> (<a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *pHandle, int16_t hMecAngle)</td></tr>
<tr class="memdesc:ga45c391ca64c6b93e73234272733002f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Empty function. Could be declared to set instantaneous information on rotor mechanical angle.  <a href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga45c391ca64c6b93e73234272733002f0">More...</a><br /></td></tr>
<tr class="separator:ga45c391ca64c6b93e73234272733002f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga82f5da6f410b7201371a70d20aaa33b8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga82f5da6f410b7201371a70d20aaa33b8">STO_SetPLL</a> (<a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *pHandle, int16_t hElSpeedDpp, int16_t hElAngle)</td></tr>
<tr class="memdesc:ga82f5da6f410b7201371a70d20aaa33b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends locking info for PLL.  <a href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga82f5da6f410b7201371a70d20aaa33b8">More...</a><br /></td></tr>
<tr class="separator:ga82f5da6f410b7201371a70d20aaa33b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1aa9553df1559959094748750f5e4ef1"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga1aa9553df1559959094748750f5e4ef1">STO_PLL_GetEstimatedBemfLevel</a> (<a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:ga1aa9553df1559959094748750f5e4ef1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Exports estimated Bemf squared level stored in <code>pHandle</code>.  <a href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga1aa9553df1559959094748750f5e4ef1">More...</a><br /></td></tr>
<tr class="separator:ga1aa9553df1559959094748750f5e4ef1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadb6df2dfeaaa27cebef41511403087f1"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#gadb6df2dfeaaa27cebef41511403087f1">STO_PLL_GetObservedBemfLevel</a> (<a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gadb6df2dfeaaa27cebef41511403087f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Exports observed Bemf squared level stored in <code>pHandle</code>.  <a href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#gadb6df2dfeaaa27cebef41511403087f1">More...</a><br /></td></tr>
<tr class="separator:gadb6df2dfeaaa27cebef41511403087f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3da1e7d25ccfb15920bdcc620f0535d0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga3da1e7d25ccfb15920bdcc620f0535d0">STO_PLL_BemfConsistencyCheckSwitch</a> (<a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *pHandle, bool bSel)</td></tr>
<tr class="memdesc:ga3da1e7d25ccfb15920bdcc620f0535d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables/Disables additional reliability check based on observed Bemf.  <a href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga3da1e7d25ccfb15920bdcc620f0535d0">More...</a><br /></td></tr>
<tr class="separator:ga3da1e7d25ccfb15920bdcc620f0535d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga77c368efa62bcb921c9063d6441440d8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga77c368efa62bcb921c9063d6441440d8">STO_PLL_IsBemfConsistent</a> (<a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:ga77c368efa62bcb921c9063d6441440d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the Bemf is consistent.  <a href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga77c368efa62bcb921c9063d6441440d8">More...</a><br /></td></tr>
<tr class="separator:ga77c368efa62bcb921c9063d6441440d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaabc5b94c5863dce99df18966cfa99c19"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#gaabc5b94c5863dce99df18966cfa99c19">STO_PLL_IsVarianceTight</a> (const <a class="el" href="group___speedn_pos_fdbk.html#ga161a0878195349c8bcc94993b6dc1e51">STO_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gaabc5b94c5863dce99df18966cfa99c19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks the value of the variance.  <a href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#gaabc5b94c5863dce99df18966cfa99c19">More...</a><br /></td></tr>
<tr class="separator:gaabc5b94c5863dce99df18966cfa99c19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga38610b66542079795a90bd3144dd7cb0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga38610b66542079795a90bd3144dd7cb0">STO_PLL_ForceConvergency1</a> (<a class="el" href="group___speedn_pos_fdbk.html#ga161a0878195349c8bcc94993b6dc1e51">STO_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:ga38610b66542079795a90bd3144dd7cb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Forces the state-observer to declare convergency.  <a href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga38610b66542079795a90bd3144dd7cb0">More...</a><br /></td></tr>
<tr class="separator:ga38610b66542079795a90bd3144dd7cb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga97f33a15d1585a612fd2cd2c32f617ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga97f33a15d1585a612fd2cd2c32f617ed">STO_PLL_ForceConvergency2</a> (<a class="el" href="group___speedn_pos_fdbk.html#ga161a0878195349c8bcc94993b6dc1e51">STO_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:ga97f33a15d1585a612fd2cd2c32f617ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Forces the state-observer to declare convergency.  <a href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga97f33a15d1585a612fd2cd2c32f617ed">More...</a><br /></td></tr>
<tr class="separator:ga97f33a15d1585a612fd2cd2c32f617ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga47715e54673bdee91ff3e3c3af678bf5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga47715e54673bdee91ff3e3c3af678bf5">STO_SetMinStartUpValidSpeedUnit</a> (<a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *pHandle, uint16_t hMinStartUpValidSpeed)</td></tr>
<tr class="memdesc:ga47715e54673bdee91ff3e3c3af678bf5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the Absolute value of minimum mechanical speed (expressed in the unit defined by <a class="el" href="mc__stm__types_8h.html#a068140274b96a55eabb3ed3261c30d75" title="Rotation speed unit used at the interface with the application.">SPEED_UNIT</a>) required to validate the start-up.  <a href="group___speedn_pos_fdbk___s_t_o___p_l_l.html#ga47715e54673bdee91ff3e3c3af678bf5">More...</a><br /></td></tr>
<tr class="separator:ga47715e54673bdee91ff3e3c3af678bf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad311cc6cff8b0c96fe1c20eb6e5dcfcc"><td class="memItemLeft" align="right" valign="top"><a id="gad311cc6cff8b0c96fe1c20eb6e5dcfcc" name="gad311cc6cff8b0c96fe1c20eb6e5dcfcc"></a>
__weak void&#160;</td><td class="memItemRight" valign="bottom"><b>STO_SetDirection</b> (<a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *pHandle, int8_t direction)</td></tr>
<tr class="memdesc:gad311cc6cff8b0c96fe1c20eb6e5dcfcc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the rotation <code>direction</code> in <code>pHandle</code>. <br /></td></tr>
<tr class="separator:gad311cc6cff8b0c96fe1c20eb6e5dcfcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >State Observer with PLL Speed &amp; Position Feedback component of MCSDK. </p>
<p >This component uses a State Observer coupled with a software PLL to provide an estimation of the speed and the position of the rotor of the motor.</p>
<p >See the <a class="el" href="md_docs_speed_pos_sensorless_bemf_reconstruction.html">Speed &amp; position feedback sensorless chapter of the User Manual</a> for more details on the sensorless algorithm. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaf7281cda93671031ef5fb9a1621bbdef" name="gaf7281cda93671031ef5fb9a1621bbdef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf7281cda93671031ef5fb9a1621bbdef">&#9670;&#160;</a></span>STO_GetPLLGains()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void STO_GetPLLGains </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t *&#160;</td>
          <td class="paramname"><em>pPgain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t *&#160;</td>
          <td class="paramname"><em>pIgain</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Exports current PLL gains from <code>pHandle</code> to <code>pPgain</code> and <code>pIgain</code>. </p>

</div>
</div>
<a id="gab6e26c1ff881820b26d9f1b9b4c5eee4" name="gab6e26c1ff881820b26d9f1b9b4c5eee4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab6e26c1ff881820b26d9f1b9b4c5eee4">&#9670;&#160;</a></span>STO_OTF_ResetPLL()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void STO_OTF_ResetPLL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___speedn_pos_fdbk.html#ga161a0878195349c8bcc94993b6dc1e51">STO_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resets the PLL integral term during on-the-fly startup. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>Handler of the current instance of the STO component. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga3da1e7d25ccfb15920bdcc620f0535d0" name="ga3da1e7d25ccfb15920bdcc620f0535d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3da1e7d25ccfb15920bdcc620f0535d0">&#9670;&#160;</a></span>STO_PLL_BemfConsistencyCheckSwitch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void STO_PLL_BemfConsistencyCheckSwitch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bSel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enables/Disables additional reliability check based on observed Bemf. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>Handler of the current instance of the STO component. </td></tr>
    <tr><td class="paramname">bSel</td><td>Enable/Disable check. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga9031efa920f5f11b176b0e6219dd1cb2" name="ga9031efa920f5f11b176b0e6219dd1cb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9031efa920f5f11b176b0e6219dd1cb2">&#9670;&#160;</a></span>STO_PLL_CalcAvrgElSpeedDpp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void STO_PLL_CalcAvrgElSpeedDpp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes and updates the average electrical speed. </p>
<p >This method must be called - at least - with the same periodicity on which speed control is executed. It computes and update component variable hElSpeedDpp that is estimated average electrical speed expressed in dpp used for instance in observer equations. Average is computed considering a FIFO depth equal to bSpeedBufferSizedpp.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>Handler of the current instance of the STO component. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga88e1b2846db4da0ccb3faf123202dd5b" name="ga88e1b2846db4da0ccb3faf123202dd5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga88e1b2846db4da0ccb3faf123202dd5b">&#9670;&#160;</a></span>STO_PLL_CalcAvrgMecSpeedUnit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak bool STO_PLL_CalcAvrgMecSpeedUnit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t *&#160;</td>
          <td class="paramname"><em>pMecSpeedUnit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes and returns the average mechanical speed. </p>
<p >This method must be called - at least - with the same periodicity on which speed control is executed. It computes and returns - through parameter hMecSpeedUnit - the rotor average mechanical speed, expressed in <a class="el" href="mc__stm__types_8h.html#a068140274b96a55eabb3ed3261c30d75" title="Rotation speed unit used at the interface with the application.">SPEED_UNIT</a>. Average is computed considering a FIFO depth equal to bSpeedBufferSizeUnit. Moreover it also computes and returns the reliability state of the sensor.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>Handler of the current instance of the STO component. </td></tr>
    <tr><td class="paramname">pMecSpeedUnit</td><td>Pointer to int16_t, used to return the rotor average mechanical speed (expressed in <a class="el" href="mc__stm__types_8h.html#a068140274b96a55eabb3ed3261c30d75" title="Rotation speed unit used at the interface with the application.">SPEED_UNIT</a>). </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">True</td><td>if the sensor information is reliable, false otherwise. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga70e4c3e6901e74efaaaceec3b59a6eaa" name="ga70e4c3e6901e74efaaaceec3b59a6eaa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga70e4c3e6901e74efaaaceec3b59a6eaa">&#9670;&#160;</a></span>STO_PLL_CalcElAngle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak int16_t STO_PLL_CalcElAngle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_observer___inputs__t.html">Observer_Inputs_t</a> *&#160;</td>
          <td class="paramname"><em>pInputs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates the estimated electrical angle. </p>
<p >Executes Luenberger state observer equations and calls PLL to compute a new speed estimation and update the estimated electrical angle.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>Handler of the current instance of the STO component. </td></tr>
    <tr><td class="paramname">pInput</td><td>Pointer to the observer inputs structure. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int16_t</td><td>Rotor electrical angle (s16Degrees). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga331498454162f61e2aaa4a9b383435fb" name="ga331498454162f61e2aaa4a9b383435fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga331498454162f61e2aaa4a9b383435fb">&#9670;&#160;</a></span>STO_PLL_Clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void STO_PLL_Clear </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clears state observer component by re-initializing private variables in <code>pHandle</code>. </p>

</div>
</div>
<a id="ga38610b66542079795a90bd3144dd7cb0" name="ga38610b66542079795a90bd3144dd7cb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga38610b66542079795a90bd3144dd7cb0">&#9670;&#160;</a></span>STO_PLL_ForceConvergency1()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void STO_PLL_ForceConvergency1 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___speedn_pos_fdbk.html#ga161a0878195349c8bcc94993b6dc1e51">STO_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Forces the state-observer to declare convergency. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>Handler of the current instance of the STO component. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga97f33a15d1585a612fd2cd2c32f617ed" name="ga97f33a15d1585a612fd2cd2c32f617ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga97f33a15d1585a612fd2cd2c32f617ed">&#9670;&#160;</a></span>STO_PLL_ForceConvergency2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void STO_PLL_ForceConvergency2 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___speedn_pos_fdbk.html#ga161a0878195349c8bcc94993b6dc1e51">STO_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Forces the state-observer to declare convergency. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>Handler of the current instance of the STO component. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga87201907a3c922e0e6bc33c0755b5158" name="ga87201907a3c922e0e6bc33c0755b5158"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga87201907a3c922e0e6bc33c0755b5158">&#9670;&#160;</a></span>STO_PLL_GetEstimatedBemf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak <a class="el" href="structalphabeta__t.html">alphabeta_t</a> STO_PLL_GetEstimatedBemf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Exports estimated Bemf alpha-beta from <code>pHandle</code>. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="structalphabeta__t.html" title="Two components alpha, beta type definition.">alphabeta_t</a></td><td>Bemf alpha-beta. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga1aa9553df1559959094748750f5e4ef1" name="ga1aa9553df1559959094748750f5e4ef1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1aa9553df1559959094748750f5e4ef1">&#9670;&#160;</a></span>STO_PLL_GetEstimatedBemfLevel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak int32_t STO_PLL_GetEstimatedBemfLevel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Exports estimated Bemf squared level stored in <code>pHandle</code>. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int32_t</td><td>Magnitude of estimated Bemf Level squared based on speed measurement. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga23de5074c9acb6ce3a32ef26d4df3649" name="ga23de5074c9acb6ce3a32ef26d4df3649"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga23de5074c9acb6ce3a32ef26d4df3649">&#9670;&#160;</a></span>STO_PLL_GetEstimatedCurrent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak <a class="el" href="structalphabeta__t.html">alphabeta_t</a> STO_PLL_GetEstimatedCurrent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Exports from <code>pHandle</code> the stator current alpha-beta as estimated by state observer. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="structalphabeta__t.html" title="Two components alpha, beta type definition.">alphabeta_t</a></td><td>State observer estimated stator current Ialpha-beta. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gadb6df2dfeaaa27cebef41511403087f1" name="gadb6df2dfeaaa27cebef41511403087f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadb6df2dfeaaa27cebef41511403087f1">&#9670;&#160;</a></span>STO_PLL_GetObservedBemfLevel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak int32_t STO_PLL_GetObservedBemfLevel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Exports observed Bemf squared level stored in <code>pHandle</code>. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">int32_t</td><td>Magnitude of observed Bemf level squared. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga736332293576d8e556dacd198e4ff959" name="ga736332293576d8e556dacd198e4ff959"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga736332293576d8e556dacd198e4ff959">&#9670;&#160;</a></span>STO_PLL_GetObserverGains()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void STO_PLL_GetObserverGains </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t *&#160;</td>
          <td class="paramname"><em>phC2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t *&#160;</td>
          <td class="paramname"><em>phC4</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Exports current observer gains from <code>pHandle</code> and to parameters <code>phC2</code> and <code>phC4</code>. </p>

</div>
</div>
<a id="ga3eec93f65621a1e10ae7688cb7bbcb37" name="ga3eec93f65621a1e10ae7688cb7bbcb37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3eec93f65621a1e10ae7688cb7bbcb37">&#9670;&#160;</a></span>STO_PLL_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void STO_PLL_Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the <code>pHandle</code> of STate Observer (STO) PLL component. </p>

</div>
</div>
<a id="ga77c368efa62bcb921c9063d6441440d8" name="ga77c368efa62bcb921c9063d6441440d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga77c368efa62bcb921c9063d6441440d8">&#9670;&#160;</a></span>STO_PLL_IsBemfConsistent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak bool STO_PLL_IsBemfConsistent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if the Bemf is consistent. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>Handler of the current instance of the STO component. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True when observed Bemfs are consistent with expectation, false otherwise. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga76deae19ffe25cf959f61a59ec8a1818" name="ga76deae19ffe25cf959f61a59ec8a1818"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga76deae19ffe25cf959f61a59ec8a1818">&#9670;&#160;</a></span>STO_PLL_IsObserverConverged()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak bool STO_PLL_IsObserverConverged </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t *&#160;</td>
          <td class="paramname"><em>phForcedMecSpeedUnit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if the state observer algorithm converged. </p>
<p >Internally performs a set of checks necessary to state whether the state observer algorithm converged. To be periodically called during motor open-loop ramp-up (e.g. at the same frequency of SPD_CalcElAngle), it returns true if the estimated angle and speed can be considered reliable, false otherwise.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>Handler of the current instance of the STO component. </td></tr>
    <tr><td class="paramname">hForcedMecSpeedUnit</td><td>Mechanical speed in 0.1Hz unit as forced by VSS. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if the estimated angle and speed are reliables, false otherwise. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaabc5b94c5863dce99df18966cfa99c19" name="gaabc5b94c5863dce99df18966cfa99c19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaabc5b94c5863dce99df18966cfa99c19">&#9670;&#160;</a></span>STO_PLL_IsVarianceTight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak bool STO_PLL_IsVarianceTight </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group___speedn_pos_fdbk.html#ga161a0878195349c8bcc94993b6dc1e51">STO_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks the value of the variance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>Handler of the current instance of the STO component. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bool</td><td>True if the speed measurement variance is lower than threshold VariancePercentage, false otherwise. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga4f79267a7bdfe39e51cbd088a099d81e" name="ga4f79267a7bdfe39e51cbd088a099d81e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4f79267a7bdfe39e51cbd088a099d81e">&#9670;&#160;</a></span>STO_PLL_Return()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void STO_PLL_Return </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>flag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Necessary empty return to implement fictitious IRQ_Handler. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>Handler of the current instance of the STO component. </td></tr>
    <tr><td class="paramname">uint8_t</td><td>Fictitious interrupt flag. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga45c391ca64c6b93e73234272733002f0" name="ga45c391ca64c6b93e73234272733002f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga45c391ca64c6b93e73234272733002f0">&#9670;&#160;</a></span>STO_PLL_SetMecAngle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void STO_PLL_SetMecAngle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>hMecAngle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Empty function. Could be declared to set instantaneous information on rotor mechanical angle. </p>
<p >Note: Mechanical angle management is not implemented in this version of State observer sensor class.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>Handler of the current instance of the STO component. </td></tr>
    <tr><td class="paramname">hMecAngle</td><td>Instantaneous measure of rotor mechanical angle. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga9c9a3a68d900b7b78d0ead84e75f0d7c" name="ga9c9a3a68d900b7b78d0ead84e75f0d7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9c9a3a68d900b7b78d0ead84e75f0d7c">&#9670;&#160;</a></span>STO_PLL_SetObserverGains()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void STO_PLL_SetObserverGains </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>hhC1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>hhC2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores in <code>pHandle</code> the new values <code>hhC1</code> and <code>hhC2</code> for observer gains. </p>

</div>
</div>
<a id="ga8848cd78a5ea0e3e36425ef4254cad5a" name="ga8848cd78a5ea0e3e36425ef4254cad5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8848cd78a5ea0e3e36425ef4254cad5a">&#9670;&#160;</a></span>STO_ResetPLL()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void STO_ResetPLL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resets the PLL integral term. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>Handler of the current instance of the STO component. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga47715e54673bdee91ff3e3c3af678bf5" name="ga47715e54673bdee91ff3e3c3af678bf5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga47715e54673bdee91ff3e3c3af678bf5">&#9670;&#160;</a></span>STO_SetMinStartUpValidSpeedUnit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void STO_SetMinStartUpValidSpeedUnit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>hMinStartUpValidSpeed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the Absolute value of minimum mechanical speed (expressed in the unit defined by <a class="el" href="mc__stm__types_8h.html#a068140274b96a55eabb3ed3261c30d75" title="Rotation speed unit used at the interface with the application.">SPEED_UNIT</a>) required to validate the start-up. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>Handler of the current instance of the STO component. </td></tr>
    <tr><td class="paramname">hMinStartUpValidSpeed</td><td>Absolute value of minimum mechanical speed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga82f5da6f410b7201371a70d20aaa33b8" name="ga82f5da6f410b7201371a70d20aaa33b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga82f5da6f410b7201371a70d20aaa33b8">&#9670;&#160;</a></span>STO_SetPLL()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void STO_SetPLL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>hElSpeedDpp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>hElAngle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends locking info for PLL. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>Handler of the current instance of the STO component. </td></tr>
    <tr><td class="paramname">hElSpeedDpp</td><td>Estimated average electrical speed expressed in dpp. </td></tr>
    <tr><td class="paramname">hElAngle</td><td>Estimated electrical angle expressed in s16Degrees. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gac997aeee449bd164c42dea368532947a" name="gac997aeee449bd164c42dea368532947a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac997aeee449bd164c42dea368532947a">&#9670;&#160;</a></span>STO_SetPLLGains()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void STO_SetPLLGains </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s_t_o___p_l_l___handle__t.html">STO_PLL_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>hPgain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>hIgain</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores in <code>pHandle</code> the new values <code>hPgain</code> and <code>hIgain</code> for PLL gains. </p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.9.5-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
&copy; 2022, ST Microelectronics &#160;<a href="http://st.com">
<img class="footer" src="ST_logo_footer.png" alt="ST Microelectronics"/>
</a>
</small></address>
</body>
</html>
