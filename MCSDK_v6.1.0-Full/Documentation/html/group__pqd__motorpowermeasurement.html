<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STM32 Motor Control SDK: PQD Motor Power Measurement</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
  tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true
    }
});
</script>
<script type="text/javascript" async="async" src="./mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="styleSheetFile.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="motor_control.png"/></td>
  <td id="projectalign">
   <div id="projectname">STM32 Motor Control SDK<span id="projectnumber">&#160;MCFW-6.1.0</span>
   </div>
   <div id="projectbrief">Software Development Kit to build applications driving PMSM Motors with STM32</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">PQD Motor Power Measurement<div class="ingroups"><a class="el" href="group___m_c_s_d_k.html">MCSDK</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Motor Power Measurement component using DQ-frame current and voltage values.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:pqd__motor__power__measurement_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pqd__motor__power__measurement_8h.html">pqd_motor_power_measurement.h</a></td></tr>
<tr class="memdesc:pqd__motor__power__measurement_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">This file contains all definitions and functions prototypes for the PQD Motor Power Measurement component of the Motor Control SDK. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:pqd__motor__power__measurement_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pqd__motor__power__measurement_8c.html">pqd_motor_power_measurement.c</a></td></tr>
<tr class="memdesc:pqd__motor__power__measurement_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This file provides the functions that implement the features of the PQD Motor Power Measurement component of the Motor Control SDK. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_p_q_d___motor_pow_meas___handle__t.html">PQD_MotorPowMeas_Handle_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle of a PQD Motor Power Measurement component.  <a href="struct_p_q_d___motor_pow_meas___handle__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga1a7adb4ef75469fb5fff77cecf9ee28b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pqd__motorpowermeasurement.html#ga1a7adb4ef75469fb5fff77cecf9ee28b">PQD_CalcElMotorPower</a> (<a class="el" href="struct_p_q_d___motor_pow_meas___handle__t.html">PQD_MotorPowMeas_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:ga1a7adb4ef75469fb5fff77cecf9ee28b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the average electrical motor power measure with the latest values of the DQ currents and voltages.  <a href="group__pqd__motorpowermeasurement.html#ga1a7adb4ef75469fb5fff77cecf9ee28b">More...</a><br /></td></tr>
<tr class="separator:ga1a7adb4ef75469fb5fff77cecf9ee28b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0be088711ebf2acf79b0109bc92bb112"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pqd__motorpowermeasurement.html#ga0be088711ebf2acf79b0109bc92bb112">PQD_Clear</a> (<a class="el" href="struct_p_q_d___motor_pow_meas___handle__t.html">PQD_MotorPowMeas_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:ga0be088711ebf2acf79b0109bc92bb112"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears the int16_t digit average motor power value stored in the handle.  <a href="group__pqd__motorpowermeasurement.html#ga0be088711ebf2acf79b0109bc92bb112">More...</a><br /></td></tr>
<tr class="separator:ga0be088711ebf2acf79b0109bc92bb112"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaabf82a22bc2637c088331f10e44b919e"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pqd__motorpowermeasurement.html#gaabf82a22bc2637c088331f10e44b919e">PQD_GetAvrgElMotorPowerW</a> (const <a class="el" href="struct_p_q_d___motor_pow_meas___handle__t.html">PQD_MotorPowMeas_Handle_t</a> *pHandle)</td></tr>
<tr class="memdesc:gaabf82a22bc2637c088331f10e44b919e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns an average value of the measured motor power expressed in Watts.  <a href="group__pqd__motorpowermeasurement.html#gaabf82a22bc2637c088331f10e44b919e">More...</a><br /></td></tr>
<tr class="separator:gaabf82a22bc2637c088331f10e44b919e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >Motor Power Measurement component using DQ-frame current and voltage values. </p>
<p >The PQD Motor Power Measurement component uses \(I_d\), \(I_q\), \(V_d\) and \(V_q\) to compute the electrical power flowing through the motor.</p>
<p >These values are periodically sampled from the current regulation loop and used to compute instantaneous power values. The instantaneous values are then used to compute an average power value that is stored. These computations are done with integer operations and the average value is store as an integer, in s16 digit format (s16A x s16V unit).</p>
<p >The PQD Motor Power Measurement component provides an interface, <a class="el" href="group__pqd__motorpowermeasurement.html#gaabf82a22bc2637c088331f10e44b919e" title="Returns an average value of the measured motor power expressed in Watts.">PQD_GetAvrgElMotorPowerW()</a> that converts the int16_t digit average power into a floating point value expressed in Watts. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga1a7adb4ef75469fb5fff77cecf9ee28b" name="ga1a7adb4ef75469fb5fff77cecf9ee28b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1a7adb4ef75469fb5fff77cecf9ee28b">&#9670;&#160;</a></span>PQD_CalcElMotorPower()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void PQD_CalcElMotorPower </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_p_q_d___motor_pow_meas___handle__t.html">PQD_MotorPowMeas_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the average electrical motor power measure with the latest values of the DQ currents and voltages. </p>
<p >This method should be called with Medium Frequency Task periodicity. It computes an instantaneous power value using the latest \(I_{qd}\) and \(V_{qd}\) data available and uses it to update the average motor power value.</p>
<p >Computations are done on s16A and s16V integer values defined in <a class="el" href="md_docs_measurement_units.html">Current measurement unit</a>. The average motor power value is computed as an int16_t value.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>Handle on the related PQD Motor Power Measurement component instance. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga0be088711ebf2acf79b0109bc92bb112" name="ga0be088711ebf2acf79b0109bc92bb112"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0be088711ebf2acf79b0109bc92bb112">&#9670;&#160;</a></span>PQD_Clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak void PQD_Clear </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_p_q_d___motor_pow_meas___handle__t.html">PQD_MotorPowMeas_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clears the int16_t digit average motor power value stored in the handle. </p>
<p >This function should be called before each motor start.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>Handle on the related PQD Motor Power Measurement component instance. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaabf82a22bc2637c088331f10e44b919e" name="gaabf82a22bc2637c088331f10e44b919e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaabf82a22bc2637c088331f10e44b919e">&#9670;&#160;</a></span>PQD_GetAvrgElMotorPowerW()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__weak float PQD_GetAvrgElMotorPowerW </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_p_q_d___motor_pow_meas___handle__t.html">PQD_MotorPowMeas_Handle_t</a> *&#160;</td>
          <td class="paramname"><em>pHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns an average value of the measured motor power expressed in Watts. </p>
<p >This function converts the int16_t digit average motor power value stored in the handle in a floating point value in Watts.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pHandle</td><td>pointer on the related component instance. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">float</td><td>The average measured motor power expressed in Watts. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.9.5-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
&copy; 2022, ST Microelectronics &#160;<a href="http://st.com">
<img class="footer" src="ST_logo_footer.png" alt="ST Microelectronics"/>
</a>
</small></address>
</body>
</html>
