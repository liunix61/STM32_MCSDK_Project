<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STM32 Motor Control SDK: Features</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
  tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true
    }
});
</script>
<script type="text/javascript" async="async" src="./mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="styleSheetFile.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="motor_control.png"/></td>
  <td id="projectalign">
   <div id="projectname">STM32 Motor Control SDK<span id="projectnumber">&#160;MCFW-6.1.0</span>
   </div>
   <div id="projectbrief">Software Development Kit to build applications driving PMSM Motors with STM32</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Features </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >The ST MC FW library provides implementations of the Field Oriented Control (FOC) and of the Six-Step motor control techniques. This allows it for driving Permanent Magnet Synchronous motors (PMSM) and Brushless DC motors (BLDC). FOC is more suited for PMSM while the Six-Step technique is more meant for BLDC motors. The Firmware can drive both Internal Mounted PMSM and Surface Mounted PMSM.</p>
<p >The ST Motor Control Firmware library provides the following features:</p>
<h2>Field Oriented Control</h2>
<ul>
<li>SVPWM generation:<ul>
<li>Configurable PWM frequency</li>
<li>Centered PWM pattern type.</li>
</ul>
</li>
<li>Speed or Torque Control Mode: Motors can be controlled in speed or in torque mode. Switching between modes is possible at any time (even when the motor is spinning)</li>
<li>Position Control Mode. Position Control is possible for motor control applications using encoders for speed and position measurement (Build time feature. No switch to/from Torque or Speed Control modes is possible at run time when Position control mode is enabled. <a class="el" href="md_docs_position_control.html">More details here</a>)</li>
<li>Programmable Speed and Torque ramps</li>
<li>Open or Closed Loop operation<ul>
<li>Closed loop is default</li>
<li>Two Open loops modes:<ul>
<li>Open Loop Current: No control over rotor speed and position (rotation speed is arbitrary), current is regulated</li>
<li>Open Loop Voltage: No control over rotor speed and position (rotation speed is arbitrary), No current regulation (voltage reference is set)</li>
</ul>
</li>
</ul>
</li>
<li>Switching between open and closed loop is possible at run time</li>
<li>Phases Current Sensing<ul>
<li>Isolated Current Sensors (Hall effect sensors)</li>
<li>Single Shunt current sensing - common DC-link shunt resistor</li>
<li>Three Shunt resistors current sensing - three resistors placed at the bottom of each of the three inverter legs</li>
</ul>
</li>
<li>Rotor Speed and Position feedback<ul>
<li>Sensor less Back EMF State Observer coupled with a PLL for rotor speed and angle estimation</li>
<li>Sensor less Back-EMF State Observer coupled with a CORDIC for rotor speed and angle estimation;</li>
<li>60° or 120° displaced Hall sensors decoding (measurement);</li>
<li>Quadrature Encoder decoding (measurement);</li>
<li>Two of these above methods can be used simultaneously on any of the motors: Main and Auxiliary one. The Main is used in the control loop, while the other is Auxiliary.</li>
</ul>
</li>
<li>Highly configurable rev-up control sequence for sensor-less configurations</li>
<li>On-the-Fly startup feature: The sensor less algorithm is able to detect if the motor is already spinning before startup, thus skipping the acceleration phase if needed (useful for fan application)</li>
<li>Motor Brake strategies<ul>
<li>Dissipative DC link brake resistor handling;</li>
<li>Motor phases short-circuiting (with optional hardware over-current protection disabling);</li>
<li>Motor phases free-wheeling.</li>
</ul>
</li>
<li>Flux Weakening algorithm to reach higher than rated motor speed (optional)</li>
<li>Feed Forward high performance current regulation algorithm (optional)</li>
<li>Maximum Torque Per Ampere (I-PMSM only, optional)</li>
<li>Discontinuous PWM (optional)</li>
<li>Overmodulation on Phase Voltage Generation (optional)</li>
<li>Real time tuning of:<ul>
<li>PI/PID regulators parameters;</li>
<li>Sensor less algorithms (Observers, Rev-up procedure);</li>
<li>Optional algorithms (Feed Forward, Flux Weakening, MTPA…);</li>
<li>Sensor less startup procedure.</li>
</ul>
</li>
</ul>
<h2>Six-Step</h2>
<ul>
<li>Duty Cycle generation:<ul>
<li>Configurable PWM frequency</li>
<li>Edge PWM pattern type.</li>
</ul>
</li>
<li>Programmable Speed ramps</li>
<li>Closed Loop operation with real time tuning of PI/PID regulators parameters</li>
<li>Rotor Speed and Position feedback:<ul>
<li>Sensor-less with back-EMF measurement and zero crossing detection</li>
<li>Sensored with Hall sensors</li>
</ul>
</li>
<li>Startup Control for sensor-less configurations</li>
<li>Back-EMF detection capability during PWM On time</li>
<li>Two speed control modes:<ul>
<li>Voltage mode (direct change of PWM duty cycle)</li>
<li>Current mode (output current clamping)</li>
</ul>
</li>
</ul>
<h2>Use of STM32 embedded analog peripherals</h2>
<p >Some STM32 series embed analog periphales. The Motor Control library uses them where available:</p>
<ul>
<li>Support for Programmable Gain Amplifiers (PGA) usage for current sensing:<ul>
<li>three-shunts and single shunt topologies;</li>
<li>internal or external gain;</li>
</ul>
</li>
<li>Support for comparators usage in Over-Current Protection (OCP) mode:<ul>
<li>three-shunts and single shunt topologies;</li>
<li>internal or external threshold;</li>
</ul>
</li>
</ul>
<h2>Use of STM32 specific hardware accelerators</h2>
<p >Some STM32 series feature hw accelerators. The Motor Control library uses them where available:</p>
<ul>
<li>ADC queue of context (ST patented architecture);</li>
<li>CCM (core coupled memory) RAM;</li>
<li>Advanced Timer structures for single shunt topology (ST patented).</li>
<li>Adaptive real-time accelerator (ART Accelerator)</li>
<li>CORDIC (Coordinate rotation digital computer algorithm) HW accelerator (available on STM32G4xxx device family only)</li>
</ul>
<h2>Fault Management</h2>
<ul>
<li>Over-Current;</li>
<li>Over-Voltage;</li>
<li>Under-Voltage;</li>
<li>Over-Heating;</li>
<li>Speed feedback reliability error (FOC only);</li>
<li>Algorithm execution overrun.</li>
</ul>
<h2>Miscellaneous features</h2>
<ul>
<li>Temperature Sensing</li>
<li>VBus Sensing</li>
<li>Debug and Introspection features</li>
<li><a class="el" href="md_docs_misra_compliance.html">MISRA-2012 compliance</a> (STM32G4 only, optional)</li>
<li><a class="el" href="md_docs_cpu_load_measurement.html">CPU load measurement</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.5-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
&copy; 2022, ST Microelectronics &#160;<a href="http://st.com">
<img class="footer" src="ST_logo_footer.png" alt="ST Microelectronics"/>
</a>
</small></address>
</body>
</html>
